{"version":3,"file":"auth.merchant.store-CnySw04z.js","sources":["../../src/services/merchant/auth/auth.merchant.service.js","../../src/stores/merchant/auth/auth.merchant.store.js"],"sourcesContent":["import ApiClient from \"@/helper/api.helper\";\r\n\r\nclass AuthAdmin extends ApiClient {\r\n  constructor() {\r\n    super(\"merchant-auth\");\r\n  }\r\n\r\n  login(data) {\r\n    return axios.post(`${this.url}/login`, data);\r\n  }\r\n\r\n  logout() {\r\n    return axios.post(`${this.url}/logout`);\r\n  }\r\n}\r\n\r\nexport default new AuthAdmin();\r\n","import { defineStore } from \"pinia\";\r\nimport router from \"@/router\";\r\nimport authMerchantService from \"@/services/merchant/auth/auth.merchant.service\";\r\n\r\nexport const useAuthMerchantStore = defineStore(\"AuthMerchant\", {\r\n  state: () => ({\r\n    record: null,\r\n    isLoading: false,\r\n  }),\r\n  getters: {},\r\n  actions: {\r\n    loginMerchant: async function(user) {\r\n      this.isLoading = true;\r\n      try {\r\n        const { data } = await authMerchantService.login(user);\r\n        this.record = data.user;\r\n\r\n        // Save token to cookies\r\n        $cookies.set(\"merchant_khadamat_token\", data.token, \"1m\");\r\n        $cookies.set(\"merchant_khadamat_user\", data.user, \"1m\");\r\n\r\n        router.push({ name: \"merchant-dashboard\" });\r\n      } catch (error) {\r\n        return false;\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    logoutMerchant: async function() {\r\n      try {\r\n        await authMerchantService.logout();\r\n\r\n        // Remove token from cookies\r\n        $cookies.remove(\"merchant_khadamat_token\");\r\n        $cookies.remove(\"merchant_khadamat_user\");\r\n        this.record = null;\r\n\r\n        router.push({ name: \"merchant-login\" });\r\n        window.location.reload();\r\n      } catch (error) {\r\n        return error;\r\n      }\r\n    },\r\n\r\n    checkCookie: function() {\r\n      const token = $cookies.get(\"merchant_khadamat_token\");\r\n      const user = $cookies.get(\"merchant_khadamat_user\");\r\n\r\n      if (token && user) {\r\n        this.record = user;\r\n      } else {\r\n        router.push({ name: \"merchant-login\" });\r\n      }\r\n    },\r\n  },\r\n});\r\n"],"names":["AuthAdmin","ApiClient","data","authMerchantService","useAuthMerchantStore","defineStore","user","router","error","token"],"mappings":"4FAEA,MAAMA,UAAkBC,CAAU,CAChC,aAAc,CACZ,MAAM,eAAe,CACtB,CAED,MAAMC,EAAM,CACV,OAAO,MAAM,KAAK,GAAG,KAAK,GAAG,SAAUA,CAAI,CAC5C,CAED,QAAS,CACP,OAAO,MAAM,KAAK,GAAG,KAAK,GAAG,SAAS,CACvC,CACH,CAEA,MAAeC,EAAA,IAAIH,ECZNI,EAAuBC,EAAY,eAAgB,CAC9D,MAAO,KAAO,CACZ,OAAQ,KACR,UAAW,EACf,GACE,QAAS,CAAE,EACX,QAAS,CACP,cAAe,eAAeC,EAAM,CAClC,KAAK,UAAY,GACjB,GAAI,CACF,KAAM,CAAE,KAAAJ,CAAI,EAAK,MAAMC,EAAoB,MAAMG,CAAI,EACrD,KAAK,OAASJ,EAAK,KAGnB,SAAS,IAAI,0BAA2BA,EAAK,MAAO,IAAI,EACxD,SAAS,IAAI,yBAA0BA,EAAK,KAAM,IAAI,EAEtDK,EAAO,KAAK,CAAE,KAAM,oBAAsB,CAAA,CAC3C,MAAe,CACd,MAAO,EACf,QAAgB,CACR,KAAK,UAAY,EAClB,CACF,EAED,eAAgB,gBAAiB,CAC/B,GAAI,CACF,MAAMJ,EAAoB,SAG1B,SAAS,OAAO,yBAAyB,EACzC,SAAS,OAAO,wBAAwB,EACxC,KAAK,OAAS,KAEdI,EAAO,KAAK,CAAE,KAAM,gBAAkB,CAAA,EACtC,OAAO,SAAS,QACjB,OAAQC,EAAO,CACd,OAAOA,CACR,CACF,EAED,YAAa,UAAW,CACtB,MAAMC,EAAQ,SAAS,IAAI,yBAAyB,EAC9CH,EAAO,SAAS,IAAI,wBAAwB,EAE9CG,GAASH,EACX,KAAK,OAASA,EAEdC,EAAO,KAAK,CAAE,KAAM,gBAAkB,CAAA,CAEzC,CACF,CACH,CAAC"}