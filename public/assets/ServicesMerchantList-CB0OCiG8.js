import{_ as C,m,e as u,r as o,o as b,c as M,a as r,w as l,b as d,g as S,t as w,n as k}from"./index-CS9bw-lj.js";import{D as P}from"./DataTable-ClIaddqw.js";import{C as V}from"./ConfirmDialog-CLTOtqR2.js";import{u as h}from"./services.merchant.store-Dx9FRhq7.js";import{u as f}from"./categories.merchant.store-hAEm9hUI.js";import"./api.helper-X78EMQNg.js";const F={components:{DataTable:P,ConfirmDialog:V},data(){return{params:{"filter[keyword]":null,"filter[category_id]":null,perPage:10,page:1},paramsCategories:{listing:1},listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}],filterStatus:null,filterMainCategory:null,filterCategory:null}},async mounted(){await this.getMainCategoriesMerchant({"filter[isParent]":1,listing:1}),await this.getServicesMerchant(this.params)},computed:{...m(h,["records","uiFlags"]),...m(f,{categories:"records",uiFlagsCategories:"uiFlags",mainCategories:"mainCategories",uiFlagsMainCategories:"uiFlags"}),headers(){return[{title:"#",align:"start",sortable:!0,key:"id"},{title:this.$t("admin_categories.fields.title"),align:"start",sortable:!0,key:"title"},{title:this.$t("admin_merchant.fields.category"),align:"start",sortable:!0,key:"category"},{title:this.$t("admin_merchant.fields.price"),align:"start",sortable:!0,key:"price"},{title:this.$t("admin_categories.fields.status"),align:"start",sortable:!0,key:"status"}]},items(){return this.records?.data?.map(e=>({...e,title:e.title?e.title[this.$i18n.locale]:"---",email:e.email?e.email:"---",status:e.status?e.status:"---",category:e.category?e.category.title[this.$i18n.locale]:"---"}))},listCategories(){return this.categories?.data?.map(e=>({...e,title:e.title?e.title[this.$i18n.locale]:"---"}))},mainCategoriesList(){return this.mainCategories?.data?.map(e=>({text:e.title[this.$i18n.locale],value:e.id}))}},methods:{...u(h,["getServicesMerchant"]),...u(f,["getCategoriesMerchant","getMainCategoriesMerchant"]),async filterByStatus(e){this.params["filter[status]"]=e,await this.getServicesMerchant(this.params)},async filterByMainCategory(e){this.params["filter[main_category_id]"]=e,await this.getServicesMerchant(this.params)},async filterByCategory(e){this.params["filter[category_id]"]=e,await this.getServicesMerchant(this.params)},async clearFilter(){this.filterStatus=null,this.filterMainCategory=null,this.filterCategory=null,this.params["filter[category_id]"]=null,this.params["filter[status]"]=null,this.params["filter[main_category_id]"]=null,await this.getServicesMerchant(this.params)},async changePage(e){this.params.page=e,await this.getServicesMerchant(this.params)},async changePerPage(e){this.params.perPage=e,this.params.page=1,await this.getServicesMerchant(this.params)},async search(e){this.params["filter[keyword]"]=e;const t={"filter[keyword]":e};await this.getServicesMerchant(t)}},watch:{$route(e,t){e.query.category_id?this.params["filter[category_id]"]=this.listCategories.find(c=>c.id==e.query.category_id).id:this.params["filter[category_id]"]=null,this.getServicesMerchant(this.params)},filterMainCategory(){this.filterCategory=null}}},B={class:""},L={class:"d-flex align-center ga-3"},x=["disabled"];function $(e,t,c,z,i,s){const g=o("v-autocomplete"),n=o("v-col"),p=o("v-select"),y=o("v-icon"),v=o("v-row"),_=o("data-table");return b(),M("div",B,[r(_,{title:e.$t("admin_navbar_links.services"),placeholder:e.$t("admin_services.search_services"),headers:s.headers,"slots-items":["status"],isLoading:e.uiFlags?.isLoading,items:s.items,meta:e.records?.meta,"has-filter":!0,onChangePage:s.changePage,onChangePerPage:s.changePerPage,onSearch:s.search},{filter:l(()=>[r(v,null,{default:l(()=>[r(n,{md:"4",cols:"12"},{default:l(()=>[r(g,{modelValue:i.filterMainCategory,"onUpdate:modelValue":[t[0]||(t[0]=a=>i.filterMainCategory=a),t[1]||(t[1]=a=>e.getCategoriesMerchant({"filter[main_category_id]":i.filterMainCategory}))],placeholder:e.$t("admin_categories.fields.main_category"),label:e.$t("admin_categories.fields.main_category"),items:s.mainCategoriesList,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),r(n,{md:"4",cols:"12"},{default:l(()=>[r(g,{placeholder:e.$t("admin_navbar_links.categories"),label:e.$t("admin_navbar_links.categories"),modelValue:i.filterCategory,"onUpdate:modelValue":[t[2]||(t[2]=a=>i.filterCategory=a),t[3]||(t[3]=a=>s.filterByCategory(a))],items:s.listCategories,"item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"",loader:e.uiFlagsCategories?.isLoading,"no-data-text":e.$t("global.actions.no_data"),"hide-details":"",disabled:!i.filterMainCategory},null,8,["placeholder","label","modelValue","items","loader","no-data-text","disabled"])]),_:1}),r(n,{md:"4",cols:"12"},{default:l(()=>[d("div",L,[r(p,{modelValue:i.filterStatus,"onUpdate:modelValue":[t[4]||(t[4]=a=>i.filterStatus=a),t[5]||(t[5]=a=>s.filterByStatus(a))],placeholder:e.$t("admin_merchant.fields.status"),items:i.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","items","no-data-text"]),d("button",{class:"pa-2 rounded border text-error",onClick:t[6]||(t[6]=(...a)=>s.clearFilter&&s.clearFilter(...a)),disabled:!i.filterStatus&&!i.filterMainCategory&&!i.params["filter[category_id]"]},[r(y,{size:"30"},{default:l(()=>[S("mdi mdi-filter-variant-remove")]),_:1})],8,x)])]),_:1})]),_:1})]),status:l(({item:a})=>[d("span",{class:k(["badge badge--status",a.item.status==="active"?"badge--success":"badge--danger"])},w(e.$t(`global.status.${a.item.status}`)),3)]),_:1},8,["title","placeholder","headers","isLoading","items","meta","onChangePage","onChangePerPage","onSearch"])])}const E=C(F,[["render",$]]);export{E as default};
//# sourceMappingURL=ServicesMerchantList-CB0OCiG8.js.map
