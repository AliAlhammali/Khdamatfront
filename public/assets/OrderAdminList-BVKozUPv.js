import{_ as B,m as c,e as f,r as o,o as b,c as L,a as r,w as s,b as n,t as _,g as y,j as P,f as z,h as Y}from"./index-CS9bw-lj.js";import{D}from"./DataTable-ClIaddqw.js";import{u as w}from"./orders.admin.store-CYV0srVx.js";import{u as k}from"./serviceProviders.admin.store-Bv9QIKe0.js";import{u as V}from"./categories.admin.store-BBluZAiq.js";import{u as S}from"./merchant.admin.store-CfqCq9f2.js";import"./api.helper-X78EMQNg.js";const F={components:{DataTable:D},data(){return{params:{"filter[keyword]":null,"filter[merchant_id]":null,perPage:10,page:1,includeOrderMainCategory:1,includeOrderMerchantClient:1,includeOrderMerchant:1,includeOrderSP:1},filtersParams:{"filter[started_from]":null,"filter[started_to]":null,"filter[service_provider_id]":null,"filter[merchant_id]":null,"filter[status]":null,"filter[merchant_client_id]":null,"filter[main_category_id]":null,"filter[category_id]":null},showUsers:!1,userSelected:null,orderSelected:null,listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}]}},async mounted(){await this.getOrdersAdmin(this.params),await this.getServiceProvidersAdmin({listing:1}),await this.getCategoriesAdmin({listing:1}),await this.getMainCategoriesAdmin({listing:1,"filter[isParent]":1}),await this.getMerchantAdmin({listing:1})},computed:{...c(w,["records","uiFlags"]),...c(k,{SPList:"records"}),...c(V,{categories:"records",mainCategories:"mainCategories"}),...c(S,{merchants:"records"}),orderStatus(){return[{value:"new",text:this.$t("global.order_status.new")},{value:"confirmed",text:this.$t("global.order_status.confirmed")},{value:"on_the_way",text:this.$t("global.order_status.on_the_way")},{value:"in_progress",text:this.$t("global.order_status.in_progress")},{value:"completed",text:this.$t("global.order_status.completed")},{value:"canceled",text:this.$t("global.order_status.canceled")}]},headers(){return[{title:this.$t("global.order_number"),align:"start",sortable:!0,key:"id"},{title:this.$t("global.created_at"),align:"start",sortable:!0,key:"created_at"},{title:this.$t("global.main_category"),align:"start",sortable:!0,key:"main_category"},{title:this.$t("admin_merchant.fields.merchant"),align:"start",sortable:!0,key:"merchant_title"},{title:this.$t("global.client_name"),align:"start",sortable:!0,key:"client_name"},{title:this.$t("global.client_phone"),align:"start",sortable:!0,key:"client_phone"},{title:this.$t("admin_merchant.fields.service_provider"),align:"start",sortable:!0,key:"service_provider"},{title:this.$t("admin_merchant.fields.total"),align:"start",sortable:!0,key:"totals.total"},{title:this.$t("global.numbers.sp_total"),align:"start",sortable:!0,key:"totals.sp_total"},{title:this.$t("admin_merchant.fields.status"),align:"start",sortable:!0,key:"status"},{title:"#",align:"start",sortable:!1,key:"actions"}]},items(){return this.records?.data?.map(e=>({...e,main_category:e.main_category.title?e.main_category.title[this.$i18n.locale]:"---",merchant_title:e.merchant?e.merchant.title:"---",client_name:e.merchant_client?e.merchant_client.name:"---",client_phone:e.merchant_client?e.merchant_client.phone:"---",status:e.status?this.$t(`global.order_status.${e.status}`):"---",pick_up_type:e.pick_up_type?this.$t(`global.order_type.${e.pick_up_type}`):"---",status_key:e.status,service_provider:e.service_provider?e.service_provider.title:"---"}))},categoriesList(){return this.categories?.data?.map(e=>({...e,title:e?.title?e.title[this.$i18n.locale]:"---"}))},mainCategoriesList(){return this.mainCategories?.map(e=>({...e,title:e?.title?e.title[this.$i18n.locale]:"---"}))}},methods:{...f(w,["getOrdersAdmin","updateOrdersAdmin"]),...f(k,["getServiceProvidersAdmin"]),...f(V,["getCategoriesAdmin","getMainCategoriesAdmin"]),...f(S,["getMerchantAdmin"]),async changePage(e){this.params.page=e,await this.getOrdersAdmin(this.params)},async changePerPage(e){this.params.perPage=e,this.params.page=1,await this.getOrdersAdmin(this.params)},async search(e){this.params["filter[keyword]"]=e;const t={"filter[keyword]":e};await this.getOrdersAdmin(t)},async updateStaff(){const e={service_provider_id:this.userSelected};await this.updateOrdersAdmin(this.orderSelected,e),this.showUsers=!1,this.userSelected=null},showModal(e){this.orderSelected=e,this.showUsers=!0},async filterOrderBy(e,t){this.filtersParams[t]=e,await this.getOrdersAdmin({...this.filtersParams,...this.params})},async clearFilter(){this.filtersParams["filter[status]"]=null,this.filtersParams["filter[merchant_id]"]=null,this.filtersParams["filter[service_provider_id]"]=null,this.filtersParams["filter[merchant_client_id]"]=null,this.filtersParams["filter[main_category_id]"]=null,this.filtersParams["filter[category_id]"]=null,this.filtersParams["filter[started_from]"]=null,this.filtersParams["filter[started_to]"]=null,await this.getOrdersAdmin(this.params)},async getSubCategories(e){this.filtersParams["filter[category_id]"]=null,await this.getCategoriesAdmin({listing:1,"filter[parent_id]":e})},async clearFilter(){this.filtersParams["filter[status]"]=null,this.filtersParams["filter[merchant_id]"]=null,this.filtersParams["filter[service_provider_id]"]=null,this.filtersParams["filter[merchant_client_id]"]=null,this.filtersParams["filter[main_category_id]"]=null,this.filtersParams["filter[category_id]"]=null,this.filtersParams["filter[started_from]"]=null,this.filtersParams["filter[started_to]"]=null,await this.getOrdersAdmin(this.params)}}},$={class:"d-flex align-center ga-2"},N={class:"d-flex align-center ga-2"},T=["disabled"],j={class:"d-flex align-center ga-2"},E={class:"mb-4"};function q(e,t,G,H,a,i){const h=o("date-picker"),d=o("v-col"),m=o("v-autocomplete"),g=o("v-select"),C=o("v-icon"),A=o("v-row"),p=o("v-tooltip"),O=o("router-link"),v=o("v-btn"),U=o("data-table"),x=o("v-card"),M=o("v-dialog");return b(),L("div",null,[r(U,{title:e.$t("admin_navbar_links.orders"),placeholder:e.$t("admin_merchant.search_placeholder_orders"),headers:i.headers,"slots-items":["actions"],isLoading:e.uiFlags?.isLoading,items:i.items,meta:e.records?.meta,onChangePage:i.changePage,onChangePerPage:i.changePerPage,onSearch:i.search,hasFilter:!0},{filter:s(()=>[r(A,null,{default:s(()=>[r(d,{md:"3",cols:"12"},{default:s(()=>[n("div",$,[n("p",null,_(e.$t("global.started_from")),1),r(h,{editable:!1,placeholder:e.$t("global.started_from"),modelValue:a.filtersParams["filter[started_from]"],"onUpdate:modelValue":t[0]||(t[0]=l=>a.filtersParams["filter[started_from]"]=l),value:a.filtersParams["filter[started_from]"],"onUpdate:value":t[1]||(t[1]=l=>a.filtersParams["filter[started_from]"]=l),type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD",onChange:t[2]||(t[2]=l=>i.filterOrderBy(l,"filter[started_from]"))},null,8,["placeholder","modelValue","value"])])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[n("div",N,[n("p",null,_(e.$t("global.started_to")),1),r(h,{editable:!1,placeholder:e.$t("global.started_to"),modelValue:a.filtersParams["filter[started_to]"],"onUpdate:modelValue":t[3]||(t[3]=l=>a.filtersParams["filter[started_to]"]=l),value:a.filtersParams["filter[started_to]"],"onUpdate:value":t[4]||(t[4]=l=>a.filtersParams["filter[started_to]"]=l),type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD",onChange:t[5]||(t[5]=l=>i.filterOrderBy(l,"filter[started_to]"))},null,8,["placeholder","modelValue","value"])])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(m,{modelValue:a.filtersParams["filter[service_provider_id]"],"onUpdate:modelValue":[t[6]||(t[6]=l=>a.filtersParams["filter[service_provider_id]"]=l),t[7]||(t[7]=l=>i.filterOrderBy(l,"filter[service_provider_id]"))],placeholder:e.$t("admin_merchant.fields.service_provider"),label:e.$t("admin_merchant.fields.service_provider"),items:e.SPList.data,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(m,{modelValue:a.filtersParams["filter[merchant_id]"],"onUpdate:modelValue":[t[8]||(t[8]=l=>a.filtersParams["filter[merchant_id]"]=l),t[9]||(t[9]=l=>i.filterOrderBy(l,"filter[merchant_id]"))],placeholder:e.$t("admin_merchant.fields.merchant"),label:e.$t("admin_merchant.fields.merchant"),items:e.merchants.data,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(m,{modelValue:a.filtersParams["filter[merchant_client_id]"],"onUpdate:modelValue":[t[10]||(t[10]=l=>a.filtersParams["filter[merchant_client_id]"]=l),t[11]||(t[11]=l=>i.filterOrderBy(l,"filter[merchant_client_id]"))],placeholder:e.$t("global.client_name"),label:e.$t("global.client_name"),items:e.merchants.data,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(m,{modelValue:a.filtersParams["filter[main_category_id]"],"onUpdate:modelValue":[t[12]||(t[12]=l=>a.filtersParams["filter[main_category_id]"]=l),t[13]||(t[13]=l=>i.getSubCategories(l))],placeholder:e.$t("global.main_category"),label:e.$t("global.main_category"),items:i.mainCategoriesList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(m,{modelValue:a.filtersParams["filter[category_id]"],"onUpdate:modelValue":[t[14]||(t[14]=l=>a.filtersParams["filter[category_id]"]=l),t[15]||(t[15]=l=>i.filterOrderBy(l,"filter[category_id]"))],placeholder:e.$t("global.show_order.category"),label:e.$t("global.show_order.category"),items:i.categoriesList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",disabled:!a.filtersParams["filter[main_category_id]"]},null,8,["modelValue","placeholder","label","items","no-data-text","disabled"])]),_:1}),r(d,{md:"3",cols:"12"},{default:s(()=>[r(g,{placeholder:e.$t("admin_merchant.fields.status"),label:e.$t("admin_merchant.fields.status"),modelValue:a.filtersParams["filter[status]"],"onUpdate:modelValue":[t[16]||(t[16]=l=>a.filtersParams["filter[status]"]=l),t[17]||(t[17]=l=>i.filterOrderBy(l,"filter[status]"))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:i.orderStatus,"item-title":"text","item-value":"value"},null,8,["placeholder","label","modelValue","no-data-text","items"])]),_:1}),r(d,{cols:"2"},{default:s(()=>[n("button",{class:"pa-3 rounded border text-error",onClick:t[18]||(t[18]=(...l)=>i.clearFilter&&i.clearFilter(...l)),disabled:!a.filtersParams["filter[status]"]&&!a.filtersParams["filter[merchant_id]"]&&!a.filtersParams["filter[service_provider_id]"]&&!a.filtersParams["filter[merchant_client_id]"]&&!a.filtersParams["filter[main_category_id]"]&&!a.filtersParams["filter[category_id]"]&&!a.filtersParams["filter[started_from]"]&&!a.filtersParams["filter[started_to]"]},[r(C,{size:"24"},{default:s(()=>[y("mdi mdi-filter-variant-remove")]),_:1})],8,T)]),_:1})]),_:1})]),actions:s(({item:l})=>[n("div",j,[r(O,{to:`/admin/orders/${l.item.id}`,class:"button button--edit px-2 rounded"},{default:s(()=>[r(p,{text:e.$t("global.actions.show")},{activator:s(({props:u})=>[n("span",P(u,{class:"mdi mdi-24px mdi-eye-outline"}),null,16)]),_:1},8,["text"])]),_:2},1032,["to"]),l?.item?.status_key!=="completed"&&l?.item?.status_key!=="canceled"?(b(),z(v,{key:0,class:"button button--edit px-2 rounded",onClick:u=>i.showModal(l.item.id)},{default:s(()=>[r(p,{text:e.$t("global.actions.add_sp")},{activator:s(({props:u})=>[n("span",P(u,{class:"mdi mdi-24px mdi-account-group-outline"}),null,16)]),_:1},8,["text"])]),_:2},1032,["onClick"])):Y("",!0)])]),_:1},8,["title","placeholder","headers","isLoading","items","meta","onChangePage","onChangePerPage","onSearch"]),r(M,{modelValue:a.showUsers,"onUpdate:modelValue":t[20]||(t[20]=l=>a.showUsers=l),width:"auto"},{default:s(()=>[r(x,{"min-width":"400",class:"pa-4"},{default:s(()=>[n("h3",E,_(e.$t("global.role.service_provider")),1),r(g,{modelValue:a.userSelected,"onUpdate:modelValue":t[19]||(t[19]=l=>a.userSelected=l),items:e.SPList.data,"item-title":"title","item-value":"id",label:e.$t("admin_navbar_links.services_providers"),outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl"},null,8,["modelValue","items","label"]),r(v,{class:"w-100 mt-4",color:"primary",size:"large",onClick:i.updateStaff},{default:s(()=>[y(_(e.$t("global.actions.edit")),1)]),_:1},8,["onClick"])]),_:1})]),_:1},8,["modelValue"])])}const Z=B(F,[["render",q]]);export{Z as default};
//# sourceMappingURL=OrderAdminList-BVKozUPv.js.map
