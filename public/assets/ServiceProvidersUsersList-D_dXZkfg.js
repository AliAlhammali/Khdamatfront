import{u}from"./serviceProviderUsers.admin.store-BdpqlsYg.js";import{u as v}from"./serviceProviders.admin.store-Bv9QIKe0.js";import{_ as P,m as h,e as p,r as o,o as y,c as S,a as r,w as i,b as n,g as w,t as g,n as k}from"./index-CS9bw-lj.js";import{D as U}from"./DataTable-ClIaddqw.js";import{C as A}from"./ConfirmDialog-CLTOtqR2.js";import{s as $}from"./showAlert.helper-B16U-n7m.js";import"./api.helper-X78EMQNg.js";const C={components:{DataTable:U,ConfirmDialog:A},data(){return{params:{"filter[keyword]":null,"filter[service_provider_id]":null,"filter[status]":null,perPage:10,page:1},listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}]}},async mounted(){await this.getServiceProvidersAdmin({listing:1}),this.$route.query.service_provider_id&&(this.params["filter[service_provider_id]"]=this.merchants.data.find(e=>e.id==this.$route.query.service_provider_id).id),await this.getServiceProvidersUsersAdmin(this.params)},computed:{...h(u,["records","uiFlags"]),...h(v,{merchants:"records",merchantsUiFlags:"uiFlags"}),headers(){return[{title:"#",align:"start",sortable:!0,key:"id"},{title:this.$t("admin_merchant.fields.name"),align:"start",sortable:!0,key:"name"},{title:this.$t("admin_merchant.fields.phone"),align:"start",sortable:!0,key:"phone"},{title:this.$t("admin_merchant.fields.email"),align:"start",sortable:!0,key:"email"},{title:this.$t("admin_merchant.fields.service_provider"),align:"start",sortable:!0,key:"service_provider.title"},{title:this.$t("admin_merchant.fields.role"),align:"start",sortable:!0,key:"role"},{title:this.$t("admin_merchant.fields.status"),align:"start",sortable:!0,key:"status"}]},items(){return this.records?.data.map(e=>({...e,address:e.address?e.address:"---",phone:e.phone?e.phone:"---",email:e.email?e.email:"---",status:e.status?e.status:"---",role:e.role?e.role:"---"}))}},methods:{...p(u,["getServiceProvidersUsersAdmin","deleteServiceProvidersUsersAdmin"]),...p(v,["getServiceProvidersAdmin"]),async deleteRecord(e){(await $({title:this.$t("global.actions.delete"),text:this.$t("global.actions.delete_confirmation")+e.name,confirmButtonText:this.$t("global.actions.delete"),cancelButtonText:this.$t("global.actions.cancel")})).isConfirmed&&(await this.deleteServiceProvidersUsersAdmin(e.id),await this.getServiceProvidersUsersAdmin(this.params))},async changePage(e){this.params.page=e,await this.getServiceProvidersUsersAdmin(this.params)},async changePerPage(e){this.params.perPage=e,this.params.page=1,await this.getServiceProvidersUsersAdmin(this.params)},async search(e){this.params["filter[keyword]"]=e;const t={"filter[keyword]":e};await this.getServiceProvidersUsersAdmin(t)},async filterOrderBy(e,t){this.params[t]=e,await this.getServiceProvidersUsersAdmin(this.params)},async clearFilter(){this.params["filter[service_provider_id]"]=null,this.params["filter[status]"]=null,await this.getServiceProvidersUsersAdmin(this.params)}},watch:{async $route(e,t){e.query.service_provider_id?this.params["filter[service_provider_id]"]=this.merchants.data.find(m=>m.id==e.query.service_provider_id).id:this.params["filter[service_provider_id]"]=null,await this.getServiceProvidersUsersAdmin(this.params)}}},V={class:""},B=["disabled"],F={class:"badge badge--status"};function D(e,t,m,L,l,a){const c=o("v-select"),d=o("v-col"),_=o("v-icon"),f=o("v-row"),b=o("data-table");return y(),S("div",V,[r(b,{title:e.$t("admin_navbar_links.services_providers_users"),placeholder:e.$t("admin_merchant.search_placeholder_users"),headers:a.headers,"slots-items":["status","role"],isLoading:e.uiFlags?.isLoading,items:a.items,meta:e.records?.meta,"has-filter":!0,onChangePage:a.changePage,onChangePerPage:a.changePerPage,onSearch:a.search},{filter:i(()=>[r(f,null,{default:i(()=>[r(d,{md:"4",cols:"12"},{default:i(()=>[r(c,{placeholder:e.$t("admin_navbar_links.services_providers"),label:e.$t("admin_navbar_links.services_providers"),modelValue:l.params["filter[service_provider_id]"],"onUpdate:modelValue":[t[0]||(t[0]=s=>l.params["filter[service_provider_id]"]=s),t[1]||(t[1]=s=>a.filterOrderBy(s,"filter[service_provider_id]"))],items:e.merchants?.data,"item-text":"name","item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"",loader:e.merchantsUiFlags?.isLoading,"no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["placeholder","label","modelValue","items","loader","no-data-text"])]),_:1}),r(d,{md:"4",cols:"12"},{default:i(()=>[r(c,{modelValue:l.params["filter[status]"],"onUpdate:modelValue":[t[2]||(t[2]=s=>l.params["filter[status]"]=s),t[3]||(t[3]=s=>a.filterOrderBy(s,"filter[status]"))],label:e.$t("admin_merchant.fields.status"),placeholder:e.$t("admin_merchant.fields.status"),items:l.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","label","placeholder","items","no-data-text"])]),_:1}),r(d,{cols:"2"},{default:i(()=>[n("button",{class:"pa-3 rounded border text-error",onClick:t[4]||(t[4]=(...s)=>a.clearFilter&&a.clearFilter(...s)),disabled:!l.params["filter[service_provider_id]"]&&!l.params["filter[status]"]},[r(_,{size:"24"},{default:i(()=>[w("mdi mdi-filter-variant-remove")]),_:1})],8,B)]),_:1})]),_:1})]),status:i(({item:s})=>[n("span",{class:k(["badge badge--status",s.item.status==="active"?"badge--success":"badge--danger"])},g(e.$t(`global.status.${s.item.status}`)),3)]),role:i(({item:s})=>[n("span",F,g(e.$t(`global.role.${s.item.role}`)),1)]),_:1},8,["title","placeholder","headers","isLoading","items","meta","onChangePage","onChangePerPage","onSearch"])])}const R=P(C,[["render",D]]);export{R as default};
//# sourceMappingURL=ServiceProvidersUsersList-D_dXZkfg.js.map
