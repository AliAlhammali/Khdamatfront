import{F as k,u as M,r as c,e as F,a as x,s as B}from"./index-COJIqLJ_.js";import{_ as D,m as E,e as S,r as u,o as m,c as w,f as p,F as P,b as d,t as i,a as t,w as l,i as T,h as f,g}from"./index-CS9bw-lj.js";import{L as A}from"./Loader-B8eGEbwu.js";import{u as _}from"./users.merchant.store-D9NGfDrS.js";import{u as z}from"./update.inputs.helper-BL7S9VQe.js";import"./api.helper-X78EMQNg.js";const L={components:{FiledInput:k,Loader:A},setup(){return{v$:M()}},validations(){return{dataObj:{name:{required:c},email:{required:c,email:F},address:{required:c},phone:{required:c},role:{required:c},password:{required:x(()=>!this.isEditDataObj)},status:{required:c}},changePassword:{password:{required:c},confirmPassword:{required:c,sameAs:B(this.changePassword.password)}}}},data(){return{dataObj:{name:null,email:null,address:null,phone:null,role:null,password:null,status:"active"},showPassword:!1,listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}],listRole:[{text:this.$t("global.role.Admin"),value:"Admin"},{text:this.$t("global.role.Staff"),value:"Staff"}],showModel:!1,changePassword:{password:null,confirmPassword:null},showUpdatePassword:!1,showConfirmPassword:!1}},async mounted(){if(this.isEditDataObj){const e=this.$route.params.id;await this.showUsersMerchant(e),this.dataObj={...this.record}}},computed:{...E(_,["uiFlags","record"]),isEditDataObj(){return this.$route.meta.edit},dataObjData(){return[{name:"name",type:"text",label:this.$t("admin_merchant.fields.title"),error:"v$.dataObj.name.$error",errorText:this.v$.dataObj.name.required.$invalid&&this.$t("errors.required"),blur:"v$.dataObj.name.$touch()"},{name:"email",type:"email",label:this.$t("admin_merchant.fields.email"),error:"v$.dataObj.email.$error",errorText:this.v$.dataObj.email.required.$invalid&&this.$t("errors.required")||this.v$.dataObj.email.email.$invalid&&this.$t("errors.email"),blur:"v$.dataObj.email.$touch()"},{name:"address",type:"text",label:this.$t("admin_merchant.fields.address"),error:"v$.dataObj.address.$error",errorText:this.v$.dataObj.address.required.$invalid&&this.$t("errors.required"),blur:"v$.dataObj.address.$touch()"},{name:"phone",type:"text",label:this.$t("admin_merchant.fields.phone"),error:"v$.dataObj.phone.$error",errorText:this.v$.dataObj.phone.required.$invalid&&this.$t("errors.required"),blur:"v$.dataObj.phone.$touch()"}]}},methods:{...S(_,["createUsersMerchant","showUsersMerchant","updateUsersMerchant"]),actionBtn(){if(this.v$.dataObj.$touch(),!this.v$.dataObj.$error)if(this.isEditDataObj){const e=z(this.dataObj,this.record);this.updateUsersMerchant(this.record.id,e);return}else this.createUsersMerchant({...this.dataObj})},async updatePassword(){this.v$.changePassword.$touch(),!this.v$.changePassword.$error&&(await this.updateUsersMerchant(this.record.id,{...this.changePassword}),this.closeModel())},closeModel(){this.showModel=!1,this.v$.$reset()}}},N={class:"content"},I={class:"d-flex border-b mb-4 pb-4 justify-space-between"},R={class:""},G=d("span",{class:"fa fa-arrow-left"},null,-1),H={class:"d-flex align-center ga-2 mb-3 filed__label"},J=d("span",{class:"text-red"},"*",-1),K={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},Q=d("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),W={class:"d-flex align-center ga-2 mb-3 filed__label"},X=d("span",{class:"text-red"},"*",-1),Y={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},Z=d("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),ee={class:"d-flex align-center justify-space-between mb-4 border-b pb-4"};function ae(e,a,se,o,s,h){const y=u("loader"),b=u("filed-input"),n=u("v-col"),$=u("v-select"),v=u("v-btn"),j=u("v-row"),V=u("v-icon"),U=u("v-card"),q=u("v-dialog");return m(),w("div",N,[e.uiFlags.isLoading?(m(),p(y,{key:0})):(m(),w(P,{key:1},[d("div",I,[d("h2",R,i(h.isEditDataObj?e.$t("admin_merchant.edit_user_title"):e.$t("admin_merchant.add_new_user")),1),d("button",{class:"d-flex ga-2 align-center",onClick:a[0]||(a[0]=r=>e.$router.go(-1))},[d("span",null,i(e.$t("global.actions.back")),1),G])]),t(j,null,{default:l(()=>[(m(!0),w(P,null,T(h.dataObjData,(r,C)=>(m(),p(n,{cols:"12",md:"6",key:C},{default:l(()=>[t(b,{label:r.label,modelValue:s.dataObj[r.name],"onUpdate:modelValue":O=>s.dataObj[r.name]=O,value:s.dataObj[r.name],type:r.type,error:o.v$.dataObj[r.name].$error,"error-text":r.errorText,onBlur:O=>o.v$.dataObj[r.name].$touch()},null,8,["label","modelValue","onUpdate:modelValue","value","type","error","error-text","onBlur"])]),_:2},1024))),128)),t(n,{cols:"12",md:"6"},{default:l(()=>[d("p",H,[d("span",null,i(e.$t("admin_merchant.fields.status")),1),J]),t($,{modelValue:s.dataObj.status,"onUpdate:modelValue":a[1]||(a[1]=r=>s.dataObj.status=r),placeholder:e.$t("admin_merchant.fields.status"),items:s.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:a[2]||(a[2]=r=>o.v$.dataObj.status.$touch()),error:o.v$.dataObj.status.$dirty&&o.v$.dataObj.status.required.$invalid,"no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","items","error","no-data-text"]),o.v$.dataObj.status.$dirty&&o.v$.dataObj.status.required.$invalid?(m(),w("p",K,[Q,d("span",null,i(e.$t("errors.required")),1)])):f("",!0)]),_:1}),t(n,{cols:"12",md:"6"},{default:l(()=>[d("p",W,[d("span",null,i(e.$t("admin_merchant.fields.role")),1),X]),t($,{modelValue:s.dataObj.role,"onUpdate:modelValue":a[3]||(a[3]=r=>s.dataObj.role=r),placeholder:e.$t("admin_merchant.fields.role"),items:s.listRole,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:a[4]||(a[4]=r=>o.v$.dataObj.role.$touch()),error:o.v$.dataObj.role.$dirty&&o.v$.dataObj.role.required.$invalid,"no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","items","error","no-data-text"]),o.v$.dataObj.role.$dirty&&o.v$.dataObj.role.required.$invalid?(m(),w("p",Y,[Z,d("span",null,i(e.$t("errors.required")),1)])):f("",!0)]),_:1}),h.isEditDataObj?f("",!0):(m(),p(n,{key:0,md:"6",cols:"12"},{default:l(()=>[t(b,{label:e.$t("admin_merchant.fields.password"),modelValue:s.dataObj.password,"onUpdate:modelValue":a[5]||(a[5]=r=>s.dataObj.password=r),value:s.dataObj.password,type:"password",error:o.v$.dataObj.password.$error,"error-text":o.v$.dataObj.password.required.$invalid&&e.$t("errors.required"),"show-password":s.showPassword,onShowPassword:a[6]||(a[6]=r=>s.showPassword=!s.showPassword),onBlur:a[7]||(a[7]=r=>o.v$.dataObj.password.$touch())},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1})),h.isEditDataObj?(m(),p(n,{key:1,md:"6",cols:"12"},{default:l(()=>[t(v,{onClick:a[8]||(a[8]=r=>s.showModel=!0)},{default:l(()=>[g(i(e.$t("global.actions.change_password")),1)]),_:1})]),_:1})):f("",!0),t(n,{cols:"12"},{default:l(()=>[t(v,{class:"w-100",color:"primary",size:"large",onClick:h.actionBtn,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||o.v$.dataObj.$error},{default:l(()=>[g(i(h.isEditDataObj?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})],64)),t(q,{modelValue:s.showModel,"onUpdate:modelValue":a[15]||(a[15]=r=>s.showModel=r),width:"auto",persistent:""},{default:l(()=>[t(U,{"min-width":"400",class:"pa-6 rounded-lg"},{default:l(()=>[d("div",ee,[d("h3",null,i(e.$t("global.actions.change_password")),1),t(v,{onClick:h.closeModel,icon:""},{default:l(()=>[t(V,null,{default:l(()=>[g("mdi mdi-close")]),_:1})]),_:1},8,["onClick"])]),t(j,null,{default:l(()=>[t(n,{cols:"12",md:"12"},{default:l(()=>[t(b,{label:e.$t("global.change_password.password"),modelValue:s.changePassword.password,"onUpdate:modelValue":a[9]||(a[9]=r=>s.changePassword.password=r),value:s.changePassword.password,type:"password",error:o.v$.changePassword.password.$error,"error-text":o.v$.changePassword.password.required.$invalid&&e.$t("errors.required"),onBlur:a[10]||(a[10]=r=>o.v$.changePassword.password.$touch()),onShowPassword:a[11]||(a[11]=r=>s.showUpdatePassword=!s.showUpdatePassword),"show-password":s.showUpdatePassword},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1}),t(n,{cols:"12",md:"12"},{default:l(()=>[t(b,{label:e.$t("global.change_password.confirm_password"),modelValue:s.changePassword.confirmPassword,"onUpdate:modelValue":a[12]||(a[12]=r=>s.changePassword.confirmPassword=r),value:s.changePassword.confirmPassword,type:"password",error:o.v$.changePassword.confirmPassword.$error,"error-text":o.v$.changePassword.confirmPassword.required.$invalid&&e.$t("errors.required")||o.v$.changePassword.confirmPassword.sameAs.$invalid&&e.$t("errors.password_mismatch"),onBlur:a[13]||(a[13]=r=>o.v$.changePassword.confirmPassword.$touch()),onShowPassword:a[14]||(a[14]=r=>s.showConfirmPassword=!s.showConfirmPassword),"show-password":s.showConfirmPassword},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1}),t(n,{cols:"12"},{default:l(()=>[t(v,{class:"w-100",color:"primary",size:"large",onClick:h.updatePassword,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||o.v$.changePassword.$error},{default:l(()=>[g(i(e.isEditMerchant?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ne=D(L,[["render",ae]]);export{ne as default};
//# sourceMappingURL=UsersMerchantCreate-CK8GgHtX.js.map
