import{C as L,a as U,h as p,m as Y}from"./apexCharts.helper-gFFfeeI0.js";import{C as z}from"./Calendar-Ds08ORNE.js";import{k as A,_ as I,q as x,m as w,e as E,r as f,o as c,c as O,b as o,a as t,w as s,t as u,h as g,f as B,g as i,j as D,p as N,d as j}from"./index-CS9bw-lj.js";import{A as F}from"./api.helper-X78EMQNg.js";import{u as H}from"./auth.merchant.store-CnySw04z.js";class q extends F{constructor(){super("merchant/dashboard")}get_figures(e){return axios.get(`${this.url}/figures`,{params:e})}get_top_staff_by_orders(e){return axios.get(`${this.url}/top_staff_by_orders`,{params:e})}get_top_staff_completed_orders(e){return axios.get(`${this.url}/top_staff_completed_orders`,{params:e})}get_calender_orders(e){return axios.get(`${this.url}/calender_orders`,{params:e})}}const h=new q,M=A("DashboardMerchant",{state:()=>({figures:{records:[],isLoading:!1},topStaffByOrders:{records:[],isLoading:!1},topStaffCompletedOrders:{records:[],isLoading:!1},calenderOrders:{records:[],isLoading:!1}}),getters:{},actions:{getFigures:async function(r){this.figures.isLoading=!0;try{const{data:e}=await h.get_figures(r);this.figures.records=e.data}catch(e){return e}finally{this.figures.isLoading=!1}},getTopStaffByOrders:async function(r){this.topStaffByOrders.isLoading=!0;try{const{data:e}=await h.get_top_staff_by_orders(r);this.topStaffByOrders.records=e.data}catch(e){return e}finally{this.topStaffByOrders.isLoading=!1}},getTopStaffCompletedOrders:async function(r){this.topStaffCompletedOrders.isLoading=!0;try{const{data:e}=await h.get_top_staff_completed_orders(r);this.topStaffCompletedOrders.records=e.data}catch(e){return e}finally{this.topStaffCompletedOrders.isLoading=!1}},getCalenderOrders:async function(r){this.calenderOrders.isLoading=!0;try{const{data:e}=await h.get_calender_orders(r);this.calenderOrders.records=e.data}catch(e){return e}finally{this.calenderOrders.isLoading=!1}}}}),P={components:{ChartBar:L,Calendar:z},data(){return{arSA:U,enUS:x,toggleTopStaffByOrders:!1,toggleTopStaffCompletedOrders:!1,paramsTopStaffByOrders:{"filter[date_from]":p().subtract(1,"month").format("YYYY-MM-DD"),"filter[date_to]":p().format("YYYY-MM-DD")},paramsTopStaffCompletedOrders:{"filter[date_from]":p().subtract(1,"month").format("YYYY-MM-DD"),"filter[date_to]":p().format("YYYY-MM-DD")}}},async mounted(){await this.getFigures(),await this.getCalenderOrders({"filter[date_from]":p().subtract(1,"month").format("YYYY-MM-DD"),"filter[date_to]":p().format("YYYY-MM-DD")}),await this.getTopStaffByOrders(this.paramsTopStaffByOrders),await this.getTopStaffCompletedOrders(this.paramsTopStaffCompletedOrders)},computed:{...w(M,["figures","calenderOrders","topStaffByOrders","topStaffCompletedOrders"]),mapTopStaffByOrders(){return Y(this.topStaffByOrders?.records)},mapTopStaffCompletedOrders(){return Y(this.topStaffCompletedOrders?.records)},...w(H,["record"]),userIsAdmin(){return this.record?.role?.toLowerCase()==="admin"}},methods:{...E(M,["getFigures","getCalenderOrders","getTopStaffByOrders","getTopStaffCompletedOrders"]),moment:p,handleEventClick(r){this.$router.push(`/merchant/orders/${r}`)},changeDate({start:r,end:e}){this.getCalenderOrders({"filter[date_from]":r,"filter[date_to]":e})}}},k=r=>(N("data-v-93fd6cc2"),r=r(),j(),r),G={key:0,class:"pa-4 bg-white shadow-lg rounded-lg border"},J={class:"figures d-flex align-center ga-4 flex-column flex-md-row"},K={key:0,class:"figure w-100 pa-2 rounded-lg border merchants"},Q={class:"d-flex align-center ga-4"},R={class:"figure-icon"},W={class:"figure-value"},X={class:"figure-title mb-2"},Z={class:"figure w-100 pa-2 rounded-lg border new-order"},$={class:"d-flex align-center ga-4"},ee={class:"figure-icon"},te={class:"figure-value"},re={class:"figure-title mb-2"},se={class:"figure w-100 pa-2 rounded-lg border progress-order"},oe={class:"d-flex align-center ga-4"},ae={class:"figure-icon"},de={class:"figure-value"},le={class:"figure-title mb-2"},fe={class:"figure w-100 pa-2 rounded-lg border completed-order"},ie={class:"d-flex align-center ga-4"},ne={class:"figure-icon"},ue={class:"figure-value"},me={class:"figure-title mb-2"},pe={class:"bg-white border rounded-lg"},ce={class:"d-flex align-center ga-2 border-b justify-space-between pa-4"},_e=k(()=>o("h3",{class:""},"أفضل الموظفين حسب الطلبات",-1)),ge={class:"bg-white border rounded-lg"},he={class:"d-flex align-center ga-2 border-b justify-space-between pa-4"},ve=k(()=>o("h3",{class:""},"أفضل الموظفين حسب الطلبات المكتملة",-1));function Oe(r,e,Se,ye,a,m){const l=f("v-icon"),n=f("v-list-item"),_=f("date-picker"),S=f("v-btn"),y=f("v-list"),b=f("v-menu"),C=f("chart-bar"),v=f("v-col"),T=f("v-row"),V=f("calendar");return c(),O("div",null,[r.figures?.isLoading?g("",!0):(c(),O("div",G,[o("div",J,[m.userIsAdmin?(c(),O("div",K,[o("div",Q,[o("div",R,[t(l,{size:"32"},{default:s(()=>[i("mdi mdi-account-tie-outline")]),_:1})]),o("div",W,u(r.figures?.records?.count_of_active_staff),1)]),o("div",X,u(r.$t("dashboard.count_of_active_staff")),1)])):g("",!0),o("div",Z,[o("div",$,[o("div",ee,[t(l,{size:"32"},{default:s(()=>[i("mdi mdi-storefront-plus-outline")]),_:1})]),o("div",te,u(r.figures?.records?.count_of_new_orders),1)]),o("div",re,u(r.$t("dashboard.count_of_new_orders")),1)]),o("div",se,[o("div",oe,[o("div",ae,[t(l,{size:"32"},{default:s(()=>[i("mdi mdi-timer-sand-complete")]),_:1})]),o("div",de,u(r.figures?.records?.count_of_in_progress_orders),1)]),o("div",le,u(r.$t("dashboard.count_of_in_progress_orders")),1)]),o("div",fe,[o("div",ie,[o("div",ne,[t(l,{size:"32"},{default:s(()=>[i("mdi mdi-storefront-check-outline")]),_:1})]),o("div",ue,u(r.figures?.records?.count_of_completed_orders),1)]),o("div",me,u(r.$t("dashboard.count_of_completed_orders")),1)])])])),m.userIsAdmin?(c(),B(T,{key:1,class:"mt-4"},{default:s(()=>[t(v,{md:"6",cols:"12"},{default:s(()=>[o("div",pe,[o("div",ce,[_e,t(b,{modelValue:a.toggleTopStaffByOrders,"onUpdate:modelValue":e[6]||(e[6]=d=>a.toggleTopStaffByOrders=d),"close-on-content-click":!1,"close-on-back":!1,persistent:""},{activator:s(({props:d})=>[o("button",D(d,{class:"py-2"}),[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-calendar-month-outline")]),_:1})],16)]),default:s(()=>[t(y,null,{default:s(()=>[t(n,null,{default:s(()=>[o("button",{onClick:e[0]||(e[0]=d=>a.toggleTopStaffByOrders=!1),class:"mb-2 text-error"},[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-close")]),_:1})])]),_:1}),t(n,null,{default:s(()=>[t(_,{modelValue:a.paramsTopStaffByOrders["filter[date_from]"],"onUpdate:modelValue":e[1]||(e[1]=d=>a.paramsTopStaffByOrders["filter[date_from]"]=d),value:a.paramsTopStaffByOrders["filter[date_from]"],"onUpdate:value":e[2]||(e[2]=d=>a.paramsTopStaffByOrders["filter[date_from]"]=d),"default-value":a.paramsTopStaffByOrders["filter[date_from]"],type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD"},null,8,["modelValue","value","default-value"])]),_:1}),t(n,null,{default:s(()=>[t(_,{modelValue:a.paramsTopStaffByOrders["filter[date_to]"],"onUpdate:modelValue":e[3]||(e[3]=d=>a.paramsTopStaffByOrders["filter[date_to]"]=d),value:a.paramsTopStaffByOrders["filter[date_to]"],"onUpdate:value":e[4]||(e[4]=d=>a.paramsTopStaffByOrders["filter[date_to]"]=d),"default-value":a.paramsTopStaffByOrders["filter[date_to]"],type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD"},null,8,["modelValue","value","default-value"])]),_:1}),t(n,null,{default:s(()=>[t(S,{onClick:e[5]||(e[5]=d=>r.getTopStaffByOrders(a.paramsTopStaffByOrders)),class:"main-btn w-100"},{default:s(()=>[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-filter")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(C,{chart:m.mapTopStaffByOrders,isLoading:r.topStaffByOrders?.isLoading},null,8,["chart","isLoading"])])]),_:1}),t(v,{md:"6",cols:"12"},{default:s(()=>[o("div",ge,[o("div",he,[ve,t(b,{modelValue:a.toggleTopStaffCompletedOrders,"onUpdate:modelValue":e[13]||(e[13]=d=>a.toggleTopStaffCompletedOrders=d),"close-on-content-click":!1,"close-on-back":!1,persistent:""},{activator:s(({props:d})=>[o("button",D(d,{class:"py-2"}),[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-calendar-month-outline")]),_:1})],16)]),default:s(()=>[t(y,null,{default:s(()=>[t(n,null,{default:s(()=>[o("button",{onClick:e[7]||(e[7]=d=>a.toggleTopStaffCompletedOrders=!1),class:"mb-2 text-error"},[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-close")]),_:1})])]),_:1}),t(n,null,{default:s(()=>[t(_,{type:"date",modelValue:a.paramsTopStaffCompletedOrders["filter[date_from]"],"onUpdate:modelValue":e[8]||(e[8]=d=>a.paramsTopStaffCompletedOrders["filter[date_from]"]=d),value:a.paramsTopStaffCompletedOrders["filter[date_from]"],"onUpdate:value":e[9]||(e[9]=d=>a.paramsTopStaffCompletedOrders["filter[date_from]"]=d),"default-value":a.paramsTopStaffCompletedOrders["filter[date_from]"],class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD"},null,8,["modelValue","value","default-value"])]),_:1}),t(n,null,{default:s(()=>[t(_,{type:"date",modelValue:a.paramsTopStaffCompletedOrders["filter[date_to]"],"onUpdate:modelValue":e[10]||(e[10]=d=>a.paramsTopStaffCompletedOrders["filter[date_to]"]=d),value:a.paramsTopStaffCompletedOrders["filter[date_to]"],"onUpdate:value":e[11]||(e[11]=d=>a.paramsTopStaffCompletedOrders["filter[date_to]"]=d),"default-value":a.paramsTopStaffCompletedOrders["filter[date_to]"],class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD"},null,8,["modelValue","value","default-value"])]),_:1}),t(n,null,{default:s(()=>[t(S,{onClick:e[12]||(e[12]=d=>r.getTopStaffCompletedOrders(a.paramsTopStaffCompletedOrders)),class:"main-btn w-100"},{default:s(()=>[t(l,{size:"24"},{default:s(()=>[i("mdi mdi-filter")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),t(C,{chart:m.mapTopStaffCompletedOrders,isLoading:r.topStaffCompletedOrders?.isLoading},null,8,["chart","isLoading"])])]),_:1})]),_:1})):g("",!0),m.userIsAdmin?(c(),B(T,{key:2,class:"mt-4"},{default:s(()=>[t(v,{cols:"12"},{default:s(()=>[t(V,{items:r.calenderOrders.records,onHandleEventClick:m.handleEventClick,onChangeDate:m.changeDate},null,8,["items","onHandleEventClick","onChangeDate"])]),_:1})]),_:1})):g("",!0)])}const Be=I(P,[["render",Oe],["__scopeId","data-v-93fd6cc2"]]);export{Be as default};
//# sourceMappingURL=MerchantHome-h9ylrX-c.js.map
