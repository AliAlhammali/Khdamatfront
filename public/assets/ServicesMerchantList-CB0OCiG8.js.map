{"version":3,"file":"ServicesMerchantList-CB0OCiG8.js","sources":["../../src/views/Merchants/Dashboard/MerchantServices/ServicesMerchantList.vue"],"sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <data-table\r\n      :title=\"$t('admin_navbar_links.services')\"\r\n      :placeholder=\"$t('admin_services.search_services')\"\r\n      :headers=\"headers\"\r\n      :slots-items=\"['status']\"\r\n      :isLoading=\"uiFlags?.isLoading\"\r\n      :items=\"items\"\r\n      :meta=\"records?.meta\"\r\n      :has-filter=\"true\"\r\n      @changePage=\"changePage\"\r\n      @changePerPage=\"changePerPage\"\r\n      @search=\"search\"\r\n    >\r\n      <template #filter>\r\n        <v-row>\r\n          <v-col md=\"4\" cols=\"12\">\r\n            <v-autocomplete\r\n              v-model=\"filterMainCategory\"\r\n              :placeholder=\"$t('admin_categories.fields.main_category')\"\r\n              :label=\"$t('admin_categories.fields.main_category')\"\r\n              :items=\"mainCategoriesList\"\r\n              :item-title=\"'text'\"\r\n              :item-value=\"'value'\"\r\n              outlined\r\n              menu-icon=\"mdi mdi-chevron-down\"\r\n              class=\"text-capitalize rounded-xl\"\r\n              :no-data-text=\"$t('global.actions.no_data')\"\r\n              hide-details\r\n              @update:modelValue=\"\r\n                getCategoriesMerchant({\r\n                  'filter[main_category_id]': filterMainCategory,\r\n                })\r\n              \"\r\n            />\r\n          </v-col>\r\n          <v-col md=\"4\" cols=\"12\">\r\n            <v-autocomplete\r\n              :placeholder=\"$t('admin_navbar_links.categories')\"\r\n              :label=\"$t('admin_navbar_links.categories')\"\r\n              v-model=\"filterCategory\"\r\n              :items=\"listCategories\"\r\n              item-value=\"id\"\r\n              menu-icon=\"mdi mdi-chevron-down\"\r\n              class=\"w-100\"\r\n              outlined\r\n              :loader=\"uiFlagsCategories?.isLoading\"\r\n              @update:modelValue=\"(val) => filterByCategory(val)\"\r\n              :no-data-text=\"$t('global.actions.no_data')\"\r\n              hide-details\r\n              :disabled=\"!filterMainCategory\"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col md=\"4\" cols=\"12\">\r\n            <div class=\"d-flex align-center ga-3\">\r\n              <v-select\r\n                v-model=\"filterStatus\"\r\n                :placeholder=\"$t('admin_merchant.fields.status')\"\r\n                :items=\"listStatus\"\r\n                :item-title=\"'text'\"\r\n                :item-value=\"'value'\"\r\n                outlined\r\n                menu-icon=\"mdi mdi-chevron-down\"\r\n                class=\"text-capitalize rounded-xl\"\r\n                :no-data-text=\"$t('global.actions.no_data')\"\r\n                hide-details\r\n                @update:modelValue=\"(val) => filterByStatus(val)\"\r\n              />\r\n              <button\r\n                class=\"pa-2 rounded border text-error\"\r\n                @click=\"clearFilter\"\r\n                :disabled=\"\r\n                  !filterStatus &&\r\n                  !filterMainCategory &&\r\n                  !params['filter[category_id]']\r\n                \"\r\n              >\r\n                <v-icon size=\"30\">mdi mdi-filter-variant-remove</v-icon>\r\n              </button>\r\n            </div>\r\n          </v-col>\r\n        </v-row>\r\n      </template>\r\n      <template #status=\"{ item }\">\r\n        <span\r\n          class=\"badge badge--status\"\r\n          :class=\"\r\n            item.item.status === 'active' ? 'badge--success' : 'badge--danger'\r\n          \"\r\n        >\r\n          {{ $t(`global.status.${item.item.status}`) }}\r\n        </span>\r\n      </template>\r\n    </data-table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { mapActions, mapState } from \"pinia\";\r\nimport DataTable from \"@/components/common/DataTable.vue\";\r\nimport ConfirmDialog from \"@/components/common/ConfirmDialog.vue\";\r\nimport { useServicesMerchantStore } from \"@/stores/merchant/services/services.merchant.store\";\r\nimport { useCategoriesMerchantStore } from \"@/stores/merchant/categories/categories.merchant.store\";\r\n\r\nexport default {\r\n  components: { DataTable, ConfirmDialog },\r\n  data() {\r\n    return {\r\n      params: {\r\n        \"filter[keyword]\": null,\r\n        \"filter[category_id]\": null,\r\n        perPage: 10,\r\n        page: 1,\r\n      },\r\n      paramsCategories: {\r\n        listing: 1,\r\n      },\r\n\r\n      listStatus: [\r\n        {\r\n          text: this.$t(\"global.status.active\"),\r\n          value: \"active\",\r\n        },\r\n        {\r\n          text: this.$t(\"global.status.inactive\"),\r\n          value: \"inactive\",\r\n        },\r\n      ],\r\n      filterStatus: null,\r\n      filterMainCategory: null,\r\n      filterCategory: null,\r\n    };\r\n  },\r\n  async mounted() {\r\n    // if (this.$route.query.category_id) {\r\n    //   this.params[\"filter[category_id]\"] = this.listCategories.find(\r\n    //     (item) => item.id == this.$route.query.category_id\r\n    //   ).id;\r\n    // }\r\n    // await this.getCategoriesMerchant(this.paramsCategories);\r\n    await this.getMainCategoriesMerchant({ \"filter[isParent]\": 1, listing: 1 });\r\n\r\n    await this.getServicesMerchant(this.params);\r\n  },\r\n  computed: {\r\n    ...mapState(useServicesMerchantStore, [\"records\", \"uiFlags\"]),\r\n    ...mapState(useCategoriesMerchantStore, {\r\n      categories: \"records\",\r\n      uiFlagsCategories: \"uiFlags\",\r\n      mainCategories: \"mainCategories\",\r\n      uiFlagsMainCategories: \"uiFlags\",\r\n    }),\r\n    headers() {\r\n      return [\r\n        {\r\n          title: \"#\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"id\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_categories.fields.title\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"title\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.category\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"category\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.price\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"price\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_categories.fields.status\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"status\",\r\n        },\r\n      ];\r\n    },\r\n    items() {\r\n      return this.records?.data?.map((item) => {\r\n        return {\r\n          ...item,\r\n          title: item.title ? item.title[this.$i18n.locale] : \"---\",\r\n          email: item.email ? item.email : \"---\",\r\n          status: item.status ? item.status : \"---\",\r\n          category: item.category\r\n            ? item.category.title[this.$i18n.locale]\r\n            : \"---\",\r\n        };\r\n      });\r\n    },\r\n    listCategories() {\r\n      return this.categories?.data?.map((item) => {\r\n        return {\r\n          ...item,\r\n          title: item.title ? item.title[this.$i18n.locale] : \"---\",\r\n        };\r\n      });\r\n    },\r\n    mainCategoriesList() {\r\n      return this.mainCategories?.data?.map((item) => {\r\n        return {\r\n          text: item.title[this.$i18n.locale],\r\n          value: item.id,\r\n        };\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(useServicesMerchantStore, [\"getServicesMerchant\"]),\r\n    ...mapActions(useCategoriesMerchantStore, [\r\n      \"getCategoriesMerchant\",\r\n      \"getMainCategoriesMerchant\",\r\n    ]),\r\n\r\n    async filterByStatus(status) {\r\n      this.params[\"filter[status]\"] = status;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n\r\n    async filterByMainCategory(categoryId) {\r\n      this.params[\"filter[main_category_id]\"] = categoryId;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n\r\n    async filterByCategory(categoryId) {\r\n      this.params[\"filter[category_id]\"] = categoryId;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n\r\n    async clearFilter() {\r\n      this.filterStatus = null;\r\n      this.filterMainCategory = null;\r\n      this.filterCategory = null;\r\n      this.params[\"filter[category_id]\"] = null;\r\n      this.params[\"filter[status]\"] = null;\r\n      this.params[\"filter[main_category_id]\"] = null;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n\r\n    async changePage(page) {\r\n      this.params.page = page;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n    async changePerPage(perPage) {\r\n      this.params.perPage = perPage;\r\n      this.params.page = 1;\r\n      await this.getServicesMerchant(this.params);\r\n    },\r\n    async search(text) {\r\n      this.params[\"filter[keyword]\"] = text;\r\n      const key = {\r\n        \"filter[keyword]\": text,\r\n      };\r\n      await this.getServicesMerchant(key);\r\n    },\r\n  },\r\n  watch: {\r\n    $route(to, from) {\r\n      if (to.query.category_id) {\r\n        this.params[\"filter[category_id]\"] = this.listCategories.find(\r\n          (item) => item.id == to.query.category_id\r\n        ).id;\r\n      } else {\r\n        this.params[\"filter[category_id]\"] = null;\r\n      }\r\n      this.getServicesMerchant(this.params);\r\n    },\r\n    filterMainCategory() {\r\n      this.filterCategory = null;\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["_sfc_main","DataTable","ConfirmDialog","mapState","useServicesMerchantStore","useCategoriesMerchantStore","item","mapActions","status","categoryId","page","perPage","text","key","to","from","_hoisted_1","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_createVNode","_component_data_table","_ctx","$options","_component_v_row","_withCtx","_component_v_col","_component_v_autocomplete","$data","$event","val","_createElementVNode","_component_v_select","args","_component_v_icon","_createTextVNode","_normalizeClass","_toDisplayString"],"mappings":"mWAyGA,MAAKA,EAAU,CACb,WAAY,CAAE,UAAAC,EAAW,cAAAC,CAAe,EACxC,MAAO,CACL,MAAO,CACL,OAAQ,CACN,kBAAmB,KACnB,sBAAuB,KACvB,QAAS,GACT,KAAM,CACP,EACD,iBAAkB,CAChB,QAAS,CACV,EAED,WAAY,CACV,CACE,KAAM,KAAK,GAAG,sBAAsB,EACpC,MAAO,QACR,EACD,CACE,KAAM,KAAK,GAAG,wBAAwB,EACtC,MAAO,UACR,CACF,EACD,aAAc,KACd,mBAAoB,KACpB,eAAgB,KAEnB,EACD,MAAM,SAAU,CAOd,MAAM,KAAK,0BAA0B,CAAE,mBAAoB,EAAG,QAAS,CAAA,CAAG,EAE1E,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EACD,SAAU,CACR,GAAGC,EAASC,EAA0B,CAAC,UAAW,SAAS,CAAC,EAC5D,GAAGD,EAASE,EAA4B,CACtC,WAAY,UACZ,kBAAmB,UACnB,eAAgB,iBAChB,sBAAuB,SACzB,CAAC,EACD,SAAU,CACR,MAAO,CACL,CACE,MAAO,IACP,MAAO,QACP,SAAU,GACV,IAAK,IACN,EACD,CACE,MAAO,KAAK,GAAG,+BAA+B,EAC9C,MAAO,QACP,SAAU,GACV,IAAK,OACN,EACD,CACE,MAAO,KAAK,GAAG,gCAAgC,EAC/C,MAAO,QACP,SAAU,GACV,IAAK,UACN,EACD,CACE,MAAO,KAAK,GAAG,6BAA6B,EAC5C,MAAO,QACP,SAAU,GACV,IAAK,OACN,EACD,CACE,MAAO,KAAK,GAAG,gCAAgC,EAC/C,MAAO,QACP,SAAU,GACV,IAAK,QACN,EAEJ,EACD,OAAQ,CACN,OAAO,KAAK,SAAS,MAAM,IAAKC,IACvB,CACL,GAAGA,EACH,MAAOA,EAAK,MAAQA,EAAK,MAAM,KAAK,MAAM,MAAM,EAAI,MACpD,MAAOA,EAAK,MAAQA,EAAK,MAAQ,MACjC,OAAQA,EAAK,OAASA,EAAK,OAAS,MACpC,SAAUA,EAAK,SACXA,EAAK,SAAS,MAAM,KAAK,MAAM,MAAM,EACrC,OAEP,CACF,EACD,gBAAiB,CACf,OAAO,KAAK,YAAY,MAAM,IAAKA,IAC1B,CACL,GAAGA,EACH,MAAOA,EAAK,MAAQA,EAAK,MAAM,KAAK,MAAM,MAAM,EAAI,OAEvD,CACF,EACD,oBAAqB,CACnB,OAAO,KAAK,gBAAgB,MAAM,IAAKA,IAC9B,CACL,KAAMA,EAAK,MAAM,KAAK,MAAM,MAAM,EAClC,MAAOA,EAAK,IAEf,CACF,CACF,EACD,QAAS,CACP,GAAGC,EAAWH,EAA0B,CAAC,qBAAqB,CAAC,EAC/D,GAAGG,EAAWF,EAA4B,CACxC,wBACA,2BACF,CAAC,EAED,MAAM,eAAeG,EAAQ,CAC3B,KAAK,OAAO,gBAAgB,EAAIA,EAChC,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EAED,MAAM,qBAAqBC,EAAY,CACrC,KAAK,OAAO,0BAA0B,EAAIA,EAC1C,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EAED,MAAM,iBAAiBA,EAAY,CACjC,KAAK,OAAO,qBAAqB,EAAIA,EACrC,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EAED,MAAM,aAAc,CAClB,KAAK,aAAe,KACpB,KAAK,mBAAqB,KAC1B,KAAK,eAAiB,KACtB,KAAK,OAAO,qBAAqB,EAAI,KACrC,KAAK,OAAO,gBAAgB,EAAI,KAChC,KAAK,OAAO,0BAA0B,EAAI,KAC1C,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EAED,MAAM,WAAWC,EAAM,CACrB,KAAK,OAAO,KAAOA,EACnB,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EACD,MAAM,cAAcC,EAAS,CAC3B,KAAK,OAAO,QAAUA,EACtB,KAAK,OAAO,KAAO,EACnB,MAAM,KAAK,oBAAoB,KAAK,MAAM,CAC3C,EACD,MAAM,OAAOC,EAAM,CACjB,KAAK,OAAO,iBAAiB,EAAIA,EACjC,MAAMC,EAAM,CACV,kBAAmBD,GAErB,MAAM,KAAK,oBAAoBC,CAAG,CACnC,CACF,EACD,MAAO,CACL,OAAOC,EAAIC,EAAM,CACXD,EAAG,MAAM,YACX,KAAK,OAAO,qBAAqB,EAAI,KAAK,eAAe,KACtDR,GAASA,EAAK,IAAMQ,EAAG,MAAM,WAC/B,EAAC,GAEF,KAAK,OAAO,qBAAqB,EAAI,KAEvC,KAAK,oBAAoB,KAAK,MAAM,CACrC,EACD,oBAAqB,CACnB,KAAK,eAAiB,IACvB,CACF,CACH,EAxROE,EAAA,CAAA,MAAM,EAAE,EAuDEC,EAAA,CAAA,MAAM,0BAA0B,EAxDjDC,EAAA,CAAA,UAAA,gIACE,OAAAC,EAAA,EAAAC,EA+FM,MA/FNJ,EA+FM,CA9FJK,EA6FaC,EAAA,CA5FV,MAAOC,EAAE,GAAA,6BAAA,EACT,YAAaA,EAAE,GAAA,gCAAA,EACf,QAASC,EAAO,QAChB,cAAa,CAAU,QAAA,EACvB,UAAWD,EAAO,SAAE,UACpB,MAAOC,EAAK,MACZ,KAAMD,EAAO,SAAE,KACf,aAAY,GACZ,aAAYC,EAAU,WACtB,gBAAeA,EAAa,cAC5B,SAAQA,EAAM,SAEJ,SACT,IAmEQ,CAnERH,EAmEQI,EAAA,KAAA,CAnFhB,QAAAC,EAiBU,IAmBQ,CAnBRL,EAmBQM,EAAA,CAnBD,GAAG,IAAI,KAAK,OAjB7B,QAAAD,EAkBY,IAiBE,CAjBFL,EAiBEO,EAAA,CAnCd,WAmBuBC,EAAkB,mBAnBzC,sBAAA,gBAmBuBA,EAAkB,mBAAAC,kBAWWP,EAAqB,sBAAA,4BAAkDM,EAAkB,uBAV9H,YAAaN,EAAE,GAAA,uCAAA,EACf,MAAOA,EAAE,GAAA,uCAAA,EACT,MAAOC,EAAkB,mBACzB,aAAY,OACZ,aAAY,QACb,SAAA,GACA,YAAU,uBACV,MAAM,6BACL,eAAcD,EAAE,GAAA,wBAAA,EACjB,eAAA,0EA7Bd,EAAA,IAqCUF,EAgBQM,EAAA,CAhBD,GAAG,IAAI,KAAK,OArC7B,QAAAD,EAsCY,IAcE,CAdFL,EAcEO,EAAA,CAbC,YAAaL,EAAE,GAAA,+BAAA,EACf,MAAOA,EAAE,GAAA,+BAAA,EAxCxB,WAyCuBM,EAAc,eAzCrC,sBAAA,gBAyCuBA,EAAc,eAAAC,eAOFC,GAAQP,EAAgB,iBAACO,CAAG,IANhD,MAAOP,EAAc,eACtB,aAAW,KACX,YAAU,uBACV,MAAM,QACN,SAAA,GACC,OAAQD,EAAiB,mBAAE,UAE3B,eAAcA,EAAE,GAAA,wBAAA,EACjB,eAAA,GACC,UAAWM,EAAkB,8GAnD5C,EAAA,IAuDUR,EA2BQM,EAAA,CA3BD,GAAG,IAAI,KAAK,OAvD7B,QAAAD,EAwDY,IAyBM,CAzBNM,EAyBM,MAzBNf,EAyBM,CAxBJI,EAYEY,EAAA,CArEhB,WA0DyBJ,EAAY,aA1DrC,sBAAA,gBA0DyBA,EAAY,aAAAC,eAUAC,GAAQP,EAAc,eAACO,CAAG,IAT9C,YAAaR,EAAE,GAAA,8BAAA,EACf,MAAOM,EAAU,WACjB,aAAY,OACZ,aAAY,QACb,SAAA,GACA,YAAU,uBACV,MAAM,6BACL,eAAcN,EAAE,GAAA,wBAAA,EACjB,eAAA,gEAGFS,EAUS,SAAA,CATP,MAAM,iCACL,4BAAOR,EAAW,aAAAA,EAAA,YAAA,GAAAU,CAAA,GAClB,UAA+BL,EAAY,eAAwBA,EAAkB,qBAAwBA,EAAM,OAAA,qBAAA,IAMpHR,EAAwDc,EAAA,CAAhD,KAAK,IAAI,EAAA,CA/EjC,QAAAT,EA+EkC,IAA6B,CA/E/DU,EA+EkC,+BAA6B,IA/E/D,EAAA,GAAA,EAAA,EAAAlB,CAAA,MAAA,EAAA,MAAA,EAAA,MAqFiB,OAAMQ,EACf,CAOO,CARY,KAAApB,KAAI,CACvB0B,EAOO,OAAA,CANL,MAvFVK,GAuFgB,sBACgB/B,EAAK,KAAK,SAAM,SAAA,iBAAA,iBAInC,EAAAgC,EAAAf,EAAA,GAAoB,iBAAAjB,EAAK,KAAK,MAAM,EAAA,CAAA,EAAA,CAAA,IA5FjD,EAAA"}