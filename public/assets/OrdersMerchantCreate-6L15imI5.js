import{u as F}from"./orders.merchant.store-9M_F6FAt.js";import{m as B,e as k,_ as q,r as n,o as m,c as y,a as r,w as a,b as o,t as g,n as A,g as M,h as w,f as V,F as U,i as L}from"./index-CS9bw-lj.js";import{u as I}from"./clients.merchant.store-BqdwfQcy.js";import{F as N,u as S,r as i,m as H,c as P,a as J}from"./index-COJIqLJ_.js";import{u as K}from"./upload.store-D2_zDjX1.js";import{M as Y}from"./Maps-Cb9r27sT.js";import{M as E}from"./MapsView-BFRTDR2k.js";import{u as T}from"./branches.merchant.store-D-2a5JRb.js";import{u as z}from"./categories.merchant.store-hAEm9hUI.js";import{u as G}from"./services.merchant.store-Dx9FRhq7.js";import"./api.helper-X78EMQNg.js";import"./geosearch.module-C3uEVW0W.js";const Q={components:{FiledInput:N,Maps:Y,MapsView:E},props:{orderData:{type:Object,default:()=>({})},errorClient:{type:Boolean,default:!1}},setup(){return{v$:S()}},validations(){return{clientObj:{name:{required:i},address:{required:i},phone:{required:i},location:{lat:{required:i},long:{required:i}},is_active:{required:i}}}},data(){return{selectClient:null,showClient:!1,clientObj:{name:null,email:null,address:null,phone:null,location:{lat:null,long:null},is_active:null},files:{},timer:null}},async mounted(){await this.getClientsMerchant()},computed:{...B(I,["records","uiFlags"]),recordsClients(){return this.records?.data||[]},clientObjData(){return[{name:"name",type:"text",label:this.$t("admin_merchant.fields.name"),error:"v$.clientObj.name.$error",errorText:this.v$.clientObj.name.required.$invalid&&this.$t("errors.required"),blur:"v$.clientObj.name.$touch()"},{name:"email",type:"email",label:this.$t("admin_merchant.fields.email"),error:"",errorText:"",blur:""},{name:"address",type:"text",label:this.$t("admin_merchant.fields.address"),error:"v$.clientObj.address.$error",errorText:this.v$.clientObj.address.required.$invalid&&this.$t("errors.required"),blur:"v$.clientObj.address.$touch()"},{name:"phone",type:"text",label:this.$t("admin_merchant.fields.phone"),error:"v$.clientObj.phone.$error",errorText:this.v$.clientObj.phone.required.$invalid&&this.$t("errors.required"),blur:"v$.clientObj.phone.$touch()"}]}},methods:{...k(I,["getClientsMerchant","createClientsMerchant"]),...k(K,["uploadFile"]),async createClient(){if(this.v$.clientObj.$touch(),this.v$.clientObj.$error)return;const{data:e}=await this.createClientsMerchant({...this.clientObj},!1);this.selectClient=e,this.showClient=!1},getLocation(e){this.clientObj.address=e.title,this.clientObj.location={lat:e.lat,long:e.long}},updateClientLocation(e){this.orderData.address.address=e.title,this.orderData.address.location={lat:e.lat,long:e.long}},async upload(e,l){const h=e.target.files[0],{data:d}=await this.uploadFile(h);this.files[l]=h,this.orderData[l]=d.data.path},async searchInList(e){e.length>2?(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(async()=>{await this.getClientsMerchant({"filter[keyword]":e})},800)):e.length===0&&await this.getClientsMerchant({"filter[keyword]":e})}},watch:{selectClient:{handler(e){e&&(this.orderData.merchant_client_id=e?.id,this.orderData.address.name=e?.name,this.orderData.address.phone=e?.phone,this.orderData.address.address=e?.address,this.orderData.address.location.lat=e?.location?.coordinates[0],this.orderData.address.location.long=e?.location?.coordinates[1],this.orderData.pick_up_type=="delivered"&&(this.orderData.address.pick_up_location.lat=e.location.coordinates[0],this.orderData.address.pick_up_location.long=e.location.coordinates[1]))},immediate:!0}}},R={class:"border my-4 pa-4"},W={class:"d-flex align-center ga-2 mb-3 filed__label"},X={class:"filed__input d-flex align-center ga-2 pa-2 rounded-lg"},Z={class:"mb-3"},ee={class:"w-100 d-flex ga-2"},te=o("span",{class:"mdi mdi-plus"},null,-1),re={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},le=o("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),ae={class:"border bg-white pa-2 rounded d-flex w-100 ga-2 align-center"},oe=o("span",{class:"mdi mdi-24px mdi-account-outline"},null,-1),ne={class:"border bg-white pa-2 rounded d-flex w-100 ga-2 align-center"},se=o("span",{class:"mdi mdi-24px mdi-phone-outline"},null,-1),ie={key:0,class:"border rounded-lg pa-2"},de={class:"bg-white rounded pa-4 overflow-auto"},ce={class:"d-flex align-center justify-space-between pb-4 mb-4 border-b"},ue=["onClick"],me=o("span",{class:"mdi mdi-24px mdi-close"},null,-1),he=[me];function _e(e,l,h,d,t,c){const $=n("filed-input"),u=n("v-col"),f=n("v-row"),C=n("v-btn"),j=n("v-search-select"),_=n("MapsView"),v=n("Maps"),p=n("v-checkbox"),O=n("v-dialog");return m(),y("div",R,[r(f,{class:"mb-4"},{default:a(()=>[r(u,{md:"6",cols:"12"},{default:a(()=>[r($,{label:e.$t("admin_merchant.fields.merchant_reference"),modelValue:h.orderData.merchant_reference,"onUpdate:modelValue":l[0]||(l[0]=b=>h.orderData.merchant_reference=b),value:h.orderData.merchant_reference,required:!1},null,8,["label","modelValue","value"])]),_:1}),r(u,{md:"6",cols:"12"},{default:a(()=>[o("p",W,g(e.$t("admin_merchant.fields.merchant_reference_file")),1),o("label",X,[o("input",{type:"file",onInput:l[1]||(l[1]=b=>c.upload(b,"merchant_reference_file"))},null,32)])]),_:1})]),_:1}),o("h3",Z,g(e.$t("orders.select_client")),1),r(f,null,{default:a(()=>[r(u,{md:"4",cols:"12"},{default:a(()=>[o("div",ee,[r(C,{flat:"",class:"d-flex align-center justify-center px-4",size:"md",onClick:l[2]||(l[2]=b=>t.showClient=!0)},{default:a(()=>[te]),_:1}),r(j,{onSearch:l[3]||(l[3]=b=>c.searchInList(e.search=b)),class:A(["w-100",{error:h.errorClient}]),options:c.recordsClients,label:"name",modelValue:t.selectClient,"onUpdate:modelValue":l[4]||(l[4]=b=>t.selectClient=b),placeholder:e.$t("admin_navbar_links.clients"),filterable:!1,loading:e.uiFlags.isLoading,dir:e.$i18n.locale==="ar"?"rtl":"ltr"},{"no-options":a(()=>[M(g(e.$t("global.actions.no_data")),1)]),_:1},8,["options","modelValue","placeholder","loading","class","dir"])]),h.errorClient?(m(),y("p",re,[le,o("span",null,g(e.$t("errors.required")),1)])):w("",!0)]),_:1}),r(u,{md:"4",cols:"12"},{default:a(()=>[o("div",ae,[oe,o("span",null,g(t.selectClient?.name),1)])]),_:1}),r(u,{md:"4",cols:"12"},{default:a(()=>[o("div",ne,[se,o("span",null,g(t.selectClient?.phone),1)])]),_:1}),r(u,{md:"12",cols:"12"},{default:a(()=>[t.selectClient?.location?.coordinates?(m(),y("div",ie,[t.selectClient?.location?.coordinates?(m(),V(_,{key:t.selectClient?.location?.coordinates,center:t.selectClient?.location?.coordinates,isEditMode:!0,onGetLocation:c.updateClientLocation},null,8,["center","onGetLocation"])):w("",!0)])):w("",!0)]),_:1})]),_:1}),r(O,{modelValue:t.showClient,"onUpdate:modelValue":l[7]||(l[7]=b=>t.showClient=b),width:"80%"},{default:a(({isActive:b})=>[o("div",de,[o("div",ce,[o("h4",null,g(e.$t("merchant.clients.add_new")),1),o("button",{onClick:s=>b.value=!1},he,8,ue)]),r(f,null,{default:a(()=>[(m(!0),y(U,null,L(c.clientObjData,(s,x)=>(m(),V(u,{cols:"12",md:"6",key:x},{default:a(()=>[r($,{label:s.label,modelValue:t.clientObj[s.name],"onUpdate:modelValue":D=>t.clientObj[s.name]=D,value:t.clientObj[s.name],type:s.type,error:s.error.length&&d.v$.clientObj[s.name].$error,"error-text":s.errorText.length&&s.errorText,onBlur:D=>s.blur.length&&d.v$.clientObj[s.name].$touch(),required:s.errorText.length},null,8,["label","modelValue","onUpdate:modelValue","value","type","error","error-text","onBlur","required"])]),_:2},1024))),128)),r(u,{cols:"12"},{default:a(()=>[(m(),V(v,{key:t.clientObj?.location?.lat,editMode:!1,lat:t.clientObj?.location?.lat,long:t.clientObj?.location?.long,onGetLocation:c.getLocation},null,8,["lat","long","onGetLocation"]))]),_:1}),r(u,{cols:"12"},{default:a(()=>[r(p,{modelValue:t.clientObj.is_active,"onUpdate:modelValue":l[5]||(l[5]=s=>t.clientObj.is_active=s),label:e.$t("global.status.active"),error:d.v$.clientObj.is_active.$error,onBlur:l[6]||(l[6]=s=>d.v$.clientObj.is_active.$touch()),"hide-details":""},null,8,["modelValue","label","error"])]),_:1}),r(u,{cols:"12"},{default:a(()=>[r(C,{class:"w-100",color:"primary",size:"large",onClick:c.createClient,loading:e.uiFlags.isCreating,disabled:e.uiFlags.isCreating||d.v$.clientObj.$error},{default:a(()=>[M(g(e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}const be=q(Q,[["render",_e]]),pe={components:{FiledInput:N,Maps:Y,MapsView:E},props:{orderData:{type:Object,default:()=>({})},errorBranch:{type:Boolean,default:!1}},setup(){return{v$:S()}},validations(){return{branchesObj:{name:{required:i},address:{required:i},location:{lat:{required:i},long:{required:i}},is_active:{required:i}}}},data(){return{showBranch:!1,selectBranch:null,branchesObj:{name:null,address:null,location:{lat:null,long:null},is_active:null}}},async mounted(){await this.getBranchesMerchant()},computed:{...B(T,{recordsBranches:"records",uiFlagsBranches:"uiFlags"}),branchesObjData(){return[{name:"name",type:"text",label:this.$t("admin_merchant.fields.name"),error:"v$.branchesObj.name.$error",errorText:this.v$.branchesObj.name.required.$invalid&&this.$t("errors.required"),blur:"v$.branchesObj.name.$touch()"},{name:"address",type:"text",label:this.$t("admin_merchant.fields.address"),error:"v$.branchesObj.address.$error",errorText:this.v$.branchesObj.address.required.$invalid&&this.$t("errors.required"),blur:"v$.branchesObj.address.$touch()"}]}},methods:{...k(T,["getBranchesMerchant","createBranchesMerchant"]),getLocation(e){this.branchesObj.address=e.title,this.branchesObj.location={lat:e.lat,long:e.long}},async createBranch(){if(this.v$.branchesObj.$touch(),this.v$.branchesObj.$error)return;const{data:e}=await this.createBranchesMerchant({...this.branchesObj},!1);this.selectBranch=e,this.showBranch=!1}},watch:{selectBranch:{handler(e){e&&(this.orderData.address.pick_up_location.lat=e.location.coordinates[0],this.orderData.address.pick_up_location.long=e.location.coordinates[1],this.orderData.merchant_branch_id=e.id)},deep:!0}}},ge={class:"border mt-4 pa-4"},fe={class:"mb-3"},ve={class:"w-100 d-flex ga-2"},ye=o("span",{class:"mdi mdi-plus"},null,-1),$e={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},je=o("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),we={class:"d-flex w-100 ga-2 align-center"},Ce={key:0,class:"border bg-white pa-2 rounded d-flex w-100 ga-2 align-center"},Oe={class:"bg-white rounded pa-4 overflow-auto"},Ve={class:"d-flex align-center justify-space-between pb-4 mb-4 border-b"},ke=["onClick"],De=o("span",{class:"mdi mdi-24px mdi-close"},null,-1),Be=[De];function Me(e,l,h,d,t,c){const $=n("v-btn"),u=n("v-select"),f=n("v-col"),C=n("MapsView"),j=n("v-row"),_=n("filed-input"),v=n("Maps"),p=n("v-checkbox"),O=n("v-dialog");return m(),y("div",ge,[o("h3",fe,g(e.$t("orders.select_branch")),1),r(j,null,{default:a(()=>[r(f,{md:"6",cols:"12"},{default:a(()=>[o("div",ve,[r($,{flat:"",class:"d-flex align-center justify-center px-4",size:"md",onClick:l[0]||(l[0]=b=>t.showBranch=!0)},{default:a(()=>[ye]),_:1}),r(u,{modelValue:t.selectBranch,"onUpdate:modelValue":l[1]||(l[1]=b=>t.selectBranch=b),placeholder:e.$t("admin_navbar_links.branches"),items:e.recordsBranches?.data,"item-title":"name","item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"","return-object":"","no-data-text":e.$t("global.actions.no_data"),error:h.errorBranch},null,8,["modelValue","placeholder","items","no-data-text","error"])]),h.errorBranch?(m(),y("p",$e,[je,o("span",null,g(e.$t("errors.required")),1)])):w("",!0)]),_:1}),r(f,{md:"12",cols:"12"},{default:a(()=>[o("div",we,[t.selectBranch?(m(),y("div",Ce,[t.selectBranch?.location.coordinates?(m(),V(C,{key:t.selectBranch?.location.coordinates,center:t.selectBranch?.location.coordinates},null,8,["center"])):w("",!0)])):w("",!0)])]),_:1})]),_:1}),r(O,{modelValue:t.showBranch,"onUpdate:modelValue":l[4]||(l[4]=b=>t.showBranch=b),width:"80%"},{default:a(({isActive:b})=>[o("div",Oe,[o("div",Ve,[o("h4",null,g(e.$t("merchant.clients.add_new")),1),o("button",{onClick:s=>b.value=!1},Be,8,ke)]),r(j,null,{default:a(()=>[(m(!0),y(U,null,L(c.branchesObjData,(s,x)=>(m(),V(f,{cols:"12",md:"6",key:x},{default:a(()=>[r(_,{label:s.label,modelValue:t.branchesObj[s.name],"onUpdate:modelValue":D=>t.branchesObj[s.name]=D,value:t.branchesObj[s.name],type:s.type,error:d.v$.branchesObj[s.name].$error,"error-text":s.errorText,onBlur:D=>d.v$.branchesObj[s.name].$touch()},null,8,["label","modelValue","onUpdate:modelValue","value","type","error","error-text","onBlur"])]),_:2},1024))),128)),r(f,{cols:"12"},{default:a(()=>[r(v,{editMode:!1,lat:t.branchesObj?.location?.lat,long:t.branchesObj?.location?.long,onGetLocation:c.getLocation},null,8,["lat","long","onGetLocation"])]),_:1}),r(f,{cols:"12"},{default:a(()=>[r(p,{modelValue:t.branchesObj.is_active,"onUpdate:modelValue":l[2]||(l[2]=s=>t.branchesObj.is_active=s),label:e.$t("global.status.active"),error:d.v$.branchesObj.is_active.$error,onBlur:l[3]||(l[3]=s=>d.v$.branchesObj.is_active.$touch()),"hide-details":""},null,8,["modelValue","label","error"])]),_:1}),r(f,{cols:"12"},{default:a(()=>[r($,{class:"w-100",color:"primary",size:"large",onClick:c.createBranch,loading:e.uiFlagsBranches.isCreating,disabled:e.uiFlagsBranches.isCreating||d.v$.branchesObj.$error},{default:a(()=>[M(g(e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})])]),_:1},8,["modelValue"])])}const qe=q(pe,[["render",Me]]),xe={props:{orderData:{type:Object,default:()=>({})},errors:{type:Object,default:()=>({})}},data(){return{category_id:null,main_category_id:null,service:null,items:[],newItem:{quantity:1,title:"",total:0,price:0}}},async mounted(){await this.getCategoriesMerchant({"filter[isParent]":1,listing:1})},computed:{...B(z,{categories:"records",categoriesUiFlags:"uiFlags",subCategories:"subCategories",uiFlagsSub:"uiFlagsSub"}),...B(G,{services:"records",uiFlagsServices:"uiFlags"}),categoryList(){return this.categories?.data?.map(e=>({...e,title:e.title[this.$i18n.locale]}))},subCategoryList(){return this.subCategories?.data?.map(e=>({...e,title:e.title[this.$i18n.locale]}))},servicesList(){return this.services?.data?.map(e=>({...e,title:e.title[this.$i18n.locale]})).filter(e=>!this.items.some(l=>l.id===e.id))}},methods:{...k(z,["getCategoriesMerchant","getSubCategoriesMerchant"]),...k(G,["getServicesMerchant"]),getService(){this.getServicesMerchant({"filter[category_id]":this.category_id,forCreatingOrder:1}),this.items=[],this.items.push({...this.newItem,category_id:this.category_id})},getSubCategory(){this.getSubCategoriesMerchant({"filter[parent_id]":this.main_category_id,listing:1}),this.category_id=null,this.service=null,this.items=[],this.orderData.main_category_id=this.main_category_id},mapItem(e,l){const h={...e,quantity:1,total:e.quantity*e.price};if(this.items[l]){this.items[l]=h,this.orderData.items=this.items.map(d=>({id:d.id,quantity:d.quantity,category_id:this.category_id}));return}},addNewItem(){const e={...this.newItem,category_id:this.category_id};this.items.push(e)}},watch:{items:{handler(){this.orderData.items=this.items.map(e=>({item_id:e.id,quantity:e.quantity,category_id:this.category_id}))},deep:!0}}},Ue={class:"border mt-4 pa-4"},Le={class:"mb-3"},Se={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},Fe=o("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),Ie={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},Te=o("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),ze={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},Ge=o("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),Ne=o("span",{class:"mdi mdi-plus"},null,-1),Ye=o("span",{class:"mdi mdi-minus"},null,-1),Ee={class:"d-flex align-center ga-2"},Ae=o("span",{class:"mdi mdi-plus"},null,-1),He=o("span",{class:"mdi mdi-delete"},null,-1);function Pe(e,l,h,d,t,c){const $=n("v-select"),u=n("v-col"),f=n("v-row"),C=n("v-text-field"),j=n("v-btn");return m(),y("div",Ue,[o("h3",Le,g(e.$t("orders.select_service")),1),r(f,null,{default:a(()=>[r(u,{md:"6",cols:"12"},{default:a(()=>[r($,{modelValue:t.main_category_id,"onUpdate:modelValue":[l[0]||(l[0]=_=>t.main_category_id=_),c.getSubCategory],placeholder:e.$t("admin_navbar_links.categories"),label:e.$t("admin_navbar_links.categories"),items:c.categoryList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","hide-details":"","no-data-text":e.$t("global.actions.no_data"),error:h.errors?.main_category_id?.$error},null,8,["modelValue","placeholder","label","items","no-data-text","onUpdate:modelValue","error"]),h.errors?.main_category_id?.$error?(m(),y("p",Se,[Fe,o("span",null,g(e.$t("errors.required")),1)])):w("",!0)]),_:1}),r(u,{md:"6",cols:"12"},{default:a(()=>[r($,{modelValue:t.category_id,"onUpdate:modelValue":[l[1]||(l[1]=_=>t.category_id=_),c.getService],placeholder:e.$t("admin_categories.sub_categories"),label:e.$t("admin_categories.sub_categories"),items:c.subCategoryList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","hide-details":"","no-data-text":e.$t("global.actions.no_data"),error:!t.category_id&&h.errors?.items?.$each.$response.$data[0]?.item_id.$error},null,8,["modelValue","placeholder","label","items","no-data-text","onUpdate:modelValue","error"]),!t.category_id&&h.errors?.items?.$each?.$response?.$data[0]?.item_id.$error?(m(),y("p",Ie,[Te,o("span",null,g(e.$t("errors.required")),1)])):w("",!0)]),_:1})]),_:1}),(m(!0),y(U,null,L(t.items,(_,v)=>(m(),y("div",{class:"mt-4",key:v},[r(f,{class:"align-start"},{default:a(()=>[r(u,{md:"3",cols:"6"},{default:a(()=>[r($,{modelValue:t.items[v],"onUpdate:modelValue":[p=>t.items[v]=p,p=>c.mapItem(p,v)],placeholder:e.$t("admin_navbar_links.services"),label:e.$t("admin_navbar_links.services"),items:c.servicesList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","hide-details":"","no-data-text":e.$t("global.actions.no_data"),"return-object":"",error:h.errors?.items?.$each?.$response?.$data[v]?.item_id?.$error},null,8,["modelValue","onUpdate:modelValue","placeholder","label","items","no-data-text","error"]),h.errors?.items?.$each?.$response?.$data[v]?.item_id?.$error?(m(),y("p",ze,[Ge,o("span",null,g(e.$t("errors.required")),1)])):w("",!0)]),_:2},1024),r(u,{md:"1",cols:"6"},{default:a(()=>[r(C,{label:e.$t("orders.price"),modelValue:_.price,"onUpdate:modelValue":p=>_.price=p,outlined:"",readonly:""},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024),r(u,{md:"3",cols:"6"},{default:a(()=>[r(C,{label:e.$t("orders.quantity"),outlined:"",readonly:"",modelValue:_.quantity,"onUpdate:modelValue":p=>_.quantity=p},{"prepend-inner":a(()=>[r(j,{color:"primary me-6",flat:"",onClick:p=>_.quantity++},{default:a(()=>[Ne]),_:2},1032,["onClick"])]),"append-inner":a(()=>[r(j,{color:"primary",flat:"",onClick:p=>_.quantity>1&&_.quantity--},{default:a(()=>[Ye]),_:2},1032,["onClick"])]),_:2},1032,["label","modelValue","onUpdate:modelValue"])]),_:2},1024),r(u,{md:"2",cols:"6"},{default:a(()=>[r(C,{label:e.$t("orders.total"),outlined:"",readonly:"",value:_.quantity*_.price,modelValue:t.items[v].total,"onUpdate:modelValue":p=>t.items[v].total=p},null,8,["label","value","modelValue","onUpdate:modelValue"])]),_:2},1024),r(u,{md:"2",cols:"6"},{default:a(()=>[o("div",Ee,[r(j,{color:"primary",onClick:c.addNewItem},{default:a(()=>[Ae]),_:1},8,["onClick"]),v!==0?(m(),V(j,{key:0,color:"error",onClick:p=>t.items.splice(v,1)},{default:a(()=>[He]),_:2},1032,["onClick"])):w("",!0)])]),_:2},1024)]),_:2},1024)]))),128))])}const Je=q(xe,[["render",Pe]]),Ke={components:{OrderClient:be,OrderBranch:qe,OrderItems:Je},setup(){return{v$:S()}},validations(){return{objData:{main_category_id:{required:i},items:{required:i,minLength:H(1),$each:P.forEach({item_id:{required:i},quantity:{required:i},category_id:{required:i}})},merchant_client_id:{required:i},address:{name:{required:i},address:{required:i},location:{lat:{required:i},long:{required:i}},pick_up_location:{lat:{required:i},long:{required:i}}},started_at:{required:i},pick_up_type:{required:i},merchant_branch_id:{required:J(function(){return this.objData.pick_up_type==="from_branch"})}}}},data(){return{objData:{main_category_id:null,items:[],merchant_client_id:null,address:{name:null,phone:null,address:null,location:{lat:null,long:null},pick_up_location:{lat:null,long:null}},started_at:new Date().toISOString().substr(0,10),pick_up_type:"delivered",merchant_branch_id:null,merchant_reference:null,merchant_reference_file:null,openTime:!1},pickList:[{text:this.$t("global.order_type.delivered"),value:"delivered"},{text:this.$t("global.order_type.from_branch"),value:"from_branch"}]}},async mounted(){},computed:{...B(F,["uiFlags"])},methods:{...k(F,["createOrdersMerchant"]),getDate(e){this.objData.started_at=e},closeTime(){this.openTime=!1},createOrder(){this.v$.objData.$touch(),this.createOrdersMerchant(this.objData)}}},Qe={class:"bg-white pa-4 rounded border rounded-lg"},Re={class:"mb-4 border-b pb-4"},We={key:0,class:""},Xe={class:"mt-4"};function Ze(e,l,h,d,t,c){const $=n("order-client"),u=n("date-picker"),f=n("v-col"),C=n("v-select"),j=n("v-row"),_=n("order-branch"),v=n("order-items"),p=n("v-btn");return m(),y("div",null,[o("div",Qe,[o("h2",Re,g(e.$t("orders.add_new")),1),r($,{"order-data":t.objData,"error-client":d.v$.objData.merchant_client_id.$error},null,8,["order-data","error-client"]),r(j,null,{default:a(()=>[r(f,{md:"6",cols:"12"},{default:a(()=>[r(u,{editable:!1,placeholder:e.$t("global.show_order.order_creation_date"),modelValue:t.objData.started_at,"onUpdate:modelValue":l[0]||(l[0]=O=>t.objData.started_at=O),value:t.objData.started_at,"onUpdate:value":l[1]||(l[1]=O=>t.objData.started_at=O),type:"datetime",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD HH:mm:ss",onChange:c.getDate,confirm:"","confirm-text":e.$t("global.actions.save")},null,8,["placeholder","modelValue","value","onChange","confirm-text"])]),_:1}),r(f,{md:"6",cols:"12"},{default:a(()=>[r(C,{modelValue:t.objData.pick_up_type,"onUpdate:modelValue":l[2]||(l[2]=O=>t.objData.pick_up_type=O),placeholder:e.$t("global.order_type.label"),label:e.$t("global.order_type.label"),items:t.pickList,"item-title":"text","item-value":"value","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1})]),_:1}),t.objData.pick_up_type!=="delivered"?(m(),y("div",We,[r(_,{"order-data":t.objData,"error-branch":d.v$.objData.merchant_branch_id.$error},null,8,["order-data","error-branch"])])):w("",!0),r(v,{"order-data":t.objData,errors:d.v$.objData},null,8,["order-data","errors"]),o("div",Xe,[r(p,{onClick:c.createOrder,class:"w-100",color:"primary",size:"large",loading:e.uiFlags.isCreated,disabled:d.v$.objData.$error},{default:a(()=>[M(g(e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])])])])}const mt=q(Ke,[["render",Ze]]);export{mt as default};
//# sourceMappingURL=OrdersMerchantCreate-6L15imI5.js.map
