import{L as A}from"./Loader-B8eGEbwu.js";import{M as I}from"./MapsView-BFRTDR2k.js";import{u as w}from"./orders.serviceProvider.store-DMHJw_fF.js";import{u as f}from"./users.serviceProvider.store-BcWVKFOU.js";import{_ as T,m as $,e as S,r as a,o as n,c,f as m,F as _,a as d,w as l,b as t,i as y,t as r,h,g as k,n as q}from"./index-CS9bw-lj.js";import"./geosearch.module-C3uEVW0W.js";import"./api.helper-X78EMQNg.js";const z={components:{Loader:A,MapsView:I},data(){return{openShare:!1,showMap:!1,service_provider_id:null}},async mounted(){await this.showOrdersServiceProvider(this.$route.params.id,{includeOrderItemService:1,includeOrderMerchantUser:1,includeOrderMerchantClient:1,includeOrderSPUser:1,includeOrderSP:1}),await this.getUsersServiceProvider({listing:1,"filter[role]":"Staff"})},computed:{...$(w,["record","uiFlags"]),...$(f,{SPUser:"records",SPUserUIFlags:"uiFlags"}),isAdmin(){return this.$cookies.get("service_provider_khadamat_user").role.toLowerCase()==="admin"},orderStatus(){return[{value:"confirmed",text:this.$t("global.order_status.confirmed"),step:2},{value:"on_the_way",text:this.$t("global.order_status.on_the_way"),step:3},{value:"in_progress",text:this.$t("global.order_status.in_progress"),step:4},{value:"completed",text:this.$t("global.order_status.completed"),step:5}]},currentStep(){return this.orderStatus.find(e=>e?.value===this.record?.status)},shareText(){return`${this.$t("share_order.client_name")} : ${this.record?.merchant_client?.name}, ${this.$t("share_order.client_phone")} : ${this.record?.merchant_client?.phone}, 
        ${this.$t("share_order.client_address")} : ${this.record?.merchant_client?.address}

      , 
        ${this.$t("share_order.merchant_address")} : ${this.record?.merchant_user?.address}
      ,
       ${this.$t("share_order.created_by")} : ${this.record?.merchant_user?.name},
      
       ${this.$t("share_order.merchant_phone")} : ${this.record?.merchant_user?.phone} ,
      ${this.$t("share_order.start_date")} : ${this.record?.started_at}`}},methods:{...S(w,["showOrdersServiceProvider","updateOrdersServiceProvider"]),...S(f,["getUsersServiceProvider"]),async updateOrders(e){await this.updateOrdersServiceProvider(this.$route.params.id,{status:e})},async updateOrdersSp(e){await this.updateOrdersServiceProvider(this.$route.params.id,{service_provider_user_id:e})}}},E={class:"content"},D={class:"border-t mt-4 pt-4"},G={class:"border pa-4 order-info rounded-lg"},H={key:0,class:"border-b mb-2"},J={class:"d-flex align-center ga-8 mb-2 pb-2"},K={class:"border-b mb-2"},Q={class:"d-flex align-center ga-8 mb-2 pb-2"},R={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},W={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},X={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},Y={class:"border-b mb-2"},Z={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},x={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between position-relative"},ee={class:"bg-white"},te={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},re={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},se={class:"d-flex align-center ga-2 mb-2 pb-2 justify-space-between"},oe={class:"text-start border-e"},ae={class:"text-start border-e"},de={class:"text-start border-e"},le={class:"text-start border-e"},ne={class:"text-start"},ie={class:"border-e"},ce={class:"border-e"},ue={class:"border-e"},pe={class:"border-e"},_e={class:"px-0"},he={key:0},me={class:"text-start border-e"},be={class:"text-start border-e"},ve={class:"text-start border-b"},ge={class:"border-e",width:"84px"},we={class:"border-e",width:"75px"},fe={class:"mb-3"};function $e(e,o,Se,ye,u,i){const O=a("Loader"),V=a("v-divider"),P=a("v-stepper-item"),U=a("v-stepper-header"),M=a("v-stepper"),b=a("v-select"),C=a("v-icon"),j=a("ShareNetwork"),v=a("v-col"),g=a("v-table"),F=a("v-row"),L=a("MapsView"),N=a("v-card"),B=a("v-dialog");return n(),c("div",E,[e.uiFlags.isLoading||e.uiFlags.isUpdating?(n(),m(O,{key:0})):(n(),c(_,{key:1},[d(M,{"alt-labels":"",elevation:"0"},{default:l(()=>[d(U,null,{default:l(()=>[(n(!0),c(_,null,y(i.orderStatus,(s,p)=>(n(),c(_,{key:p},[p!==0?(n(),m(V,{key:0})):h("",!0),d(P,{complete:i.currentStep?.step>s?.step||e.record?.status==="completed"||e.record?.status==="canceled",step:p+1,editable:!1,class:q(i.currentStep?.step===s?.step&&e.record?.status!=="completed"&&e.record?.status!=="canceled"?"active":"")},{default:l(()=>[k(r(s.text),1)]),_:2},1032,["complete","step","class"])],64))),128))]),_:1})]),_:1}),t("div",D,[d(F,null,{default:l(()=>[d(v,{md:"4",cols:"12"},{default:l(()=>[t("div",G,[i.isAdmin&&e.record.service_provider_user?(n(),c("div",H,[t("div",J,[t("span",null,r(e.$t("global.actions.sp_user")),1),d(b,{modelValue:e.record.service_provider_user.id,"onUpdate:modelValue":[o[0]||(o[0]=s=>e.record.service_provider_user.id=s),o[1]||(o[1]=s=>i.updateOrdersSp(s))],placeholder:e.$t("global.actions.sp_user"),items:e.SPUser.data,"item-title":"name","item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100 mt-2",outlined:"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","no-data-text"])])])):h("",!0),t("div",K,[t("div",Q,[t("span",null,r(e.$t("global.show_order.status")),1),d(b,{modelValue:e.record.status,"onUpdate:modelValue":[o[2]||(o[2]=s=>e.record.status=s),o[3]||(o[3]=s=>i.updateOrders(s))],placeholder:e.$t("global.show_order.status"),items:i.orderStatus,"item-title":"text","item-value":"value","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"","no-data-text":e.$t("global.actions.no_data"),disabled:e.record?.status==="completed"||e.record?.status==="canceled"},null,8,["modelValue","placeholder","items","no-data-text","disabled"])]),t("div",R,[t("span",null,r(e.$t("global.show_order.order_number")),1),t("p",null,r(e.record?.id),1)]),t("div",W,[t("span",null,r(e.$t("global.show_order.order_creation_date")),1),t("p",null,r(e.record?.created_at),1)]),t("div",X,[t("span",null,r(e.$t("global.show_order.order_start_date")),1),t("p",null,r(e.record?.started_at),1)])]),t("div",Y,[t("div",Z,[t("span",null,r(e.$t("global.show_order.created_by")),1),t("p",null,r(e.record?.merchant_user?.name?e.record?.merchant_user?.name:"---"),1)]),t("div",x,[t("span",null,r(e.$t("global.show_order.address")),1),t("button",{onClick:o[4]||(o[4]=s=>u.showMap=!u.showMap)},r(e.$t("global.show_order.view_location")),1)])]),t("div",ee,[t("div",te,[t("span",null,r(e.$t("global.show_order.subtotal")),1),t("h4",null,r(e.record?.totals?.sp_sup_total),1)]),t("div",re,[t("span",null,r(e.$t("global.show_order.tax")),1),t("h4",null,r(e.record?.totals?.sp_vat),1)]),t("div",se,[t("span",null,r(e.$t("global.show_order.total")),1),t("h4",null,r(e.record?.totals?.sp_total),1)]),d(j,{class:"main-btn pa-2 rounded-lg w-100 text-center mt-4",network:"whatsapp",url:"",title:e.$t("share_order.order_number")+e.record?.id,description:i.shareText,onOpen:o[5]||(o[5]=s=>u.openShare=!0),onChange:o[6]||(o[6]=s=>u.openShare=!1),onClose:o[7]||(o[7]=s=>u.openShare=!1)},{default:l(()=>[d(C,{size:"24"},{default:l(()=>[k("mdi mdi-share-variant-outline")]),_:1})]),_:1},8,["title","description"])])])]),_:1}),d(v,{md:"8",cols:"12"},{default:l(()=>[d(g,{class:"border rounded-lg"},{default:l(()=>[t("thead",null,[t("tr",null,[t("th",oe,r(e.$t("global.show_order.category")),1),t("th",ae,r(e.$t("global.show_order.service")),1),t("th",de,r(e.$t("global.show_order.unit_price")),1),t("th",le,r(e.$t("global.show_order.quantity")),1),t("th",ne,r(e.$t("global.show_order.total")),1)])]),t("tbody",null,[(n(!0),c(_,null,y(e.record?.items,(s,p)=>(n(),c("tr",{key:s.name},[t("td",ie,r(s.item?.category?.title?s.item?.category?.title[e.$i18n.locale]:"---"),1),t("td",ce,r(s.item?.title?s.item?.title[e.$i18n.locale]:"---"),1),t("td",ue,r(s.item?.sp_price),1),t("td",pe,r(s?.quantity),1),t("td",_e,[d(g,null,{default:l(()=>[p==0?(n(),c("thead",he,[t("tr",null,[t("th",me,r(e.$t("global.show_order.subtotal")),1),t("th",be,r(e.$t("global.show_order.tax")),1),t("th",ve,r(e.$t("global.show_order.total")),1)])])):h("",!0),t("tbody",null,[t("tr",null,[t("td",ge,r(s?.sp_sup_total),1),t("td",we,r(s?.sp_vat),1),t("td",null,r(s?.sp_total),1)])])]),_:2},1024)])]))),128))])]),_:1})]),_:1})]),_:1})])],64)),d(B,{modelValue:u.showMap,"onUpdate:modelValue":o[8]||(o[8]=s=>u.showMap=s),width:"auto"},{default:l(()=>[d(N,{"min-width":"400",class:"pa-4"},{default:l(()=>[t("p",fe,r(e.record?.address[0]?.address),1),e.record?.address[0]?.location?.coordinates?(n(),m(L,{key:e.record?.address[0]?.location?.coordinates[0],center:e.record?.address[0]?.location?.coordinates,style:{height:"400px",width:"800px"},isEditMode:!1},null,8,["center"])):h("",!0)]),_:1})]),_:1},8,["modelValue"])])}const je=T(z,[["render",$e],["__scopeId","data-v-7030804b"]]);export{je as default};
//# sourceMappingURL=OrderServiceProviderShow-CzTVyBiM.js.map
