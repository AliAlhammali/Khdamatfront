import{F as x,u as B,r as c,e as E,a as S,s as T}from"./index-COJIqLJ_.js";import{u as V}from"./users.admin.store-qbqzDZZA.js";import{_ as L,m as D,e as q,r as u,o as h,c as w,f,F as U,b as l,t as d,a as t,w as n,i as N,h as g,g as $}from"./index-CS9bw-lj.js";import{L as z}from"./Loader-B8eGEbwu.js";import{u as I}from"./update.inputs.helper-BL7S9VQe.js";import{u as j}from"./upload.store-D2_zDjX1.js";import"./api.helper-X78EMQNg.js";const G={components:{FiledInput:x,Loader:z},setup(){return{v$:B()}},validations(){return{merchant:{name:{required:c},email:{required:c,email:E},password:{required:S(()=>!this.isEditMerchant)},role:{required:c},status:{required:c},phone:{required:c},address:{required:c}},changePassword:{password:{required:c},confirmPassword:{required:c,sameAs:T(this.changePassword.password)}}}},data(){return{merchant:{name:null,email:null,password:null,phone:null,address:null,image:null,role:null,status:null},showModel:!1,changePassword:{password:null,confirmPassword:null},showPassword:!1,showConfirmPassword:!1,rolesList:[{text:this.$t("global.role.admin"),value:"admin"},{text:this.$t("global.role.staff"),value:"staff"}],listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}]}},async mounted(){if(this.isEditMerchant){const e=this.$route.params.id;await this.showUsersAdmin(e),this.merchant={...this.record}}},computed:{...D(V,["uiFlags","record"]),isEditMerchant(){return this.$route.name==="users-admin-edit"},merchantData(){return[{name:"name",type:"text",label:this.$t("admin_merchant.fields.title"),error:"v$.merchant.name.$error",errorText:this.v$.merchant.name.required.$invalid&&this.$t("errors.required"),blur:"v$.merchant.name.$touch()"},{name:"email",type:"email",label:this.$t("admin_merchant.fields.email"),error:"v$.merchant.email.$error",errorText:this.v$.merchant.email.required.$invalid&&this.$t("errors.required")||this.v$.merchant.email.email.$invalid&&this.$t("errors.email"),blur:"v$.merchant.email.$touch()"},{name:"phone",type:"text",label:this.$t("admin_merchant.fields.phone"),error:"v$.merchant.phone.$error",errorText:this.v$.merchant.phone.required.$invalid&&this.$t("errors.required"),blur:"v$.merchant.phone.$touch()"},{name:"address",type:"text",label:this.$t("admin_merchant.fields.address"),error:"v$.merchant.address.$error",errorText:this.v$.merchant.address.required.$invalid&&this.$t("errors.required"),blur:"v$.merchant.address.$touch()"}]}},methods:{...q(V,["createUsersAdmin","showUsersAdmin","updateUsersAdmin"]),...q(j,["uploadFile"]),async actionBtn(){if(this.v$.$touch(),!this.v$.merchant.$error)if(this.isEditMerchant){const e=I(this.merchant,this.record);await this.updateUsersAdmin(this.record.id,e);return}else await this.createUsersAdmin({...this.merchant})},async updatePassword(){this.v$.changePassword.$touch(),!this.v$.changePassword.$error&&(await this.updateUsersAdmin(this.record.id,{...this.changePassword}),this.closeModel())},closeModel(){this.showModel=!1,this.v$.$reset()},async upload(e,r){const b=e.target.files[0],{data:o}=await this.uploadFile(b);this.files[r]=b,this.merchant[r]=o.data.path}}},H={class:"content"},J={class:"d-flex border-b mb-4 pb-4 justify-space-between"},K={class:""},O=l("span",{class:"fa fa-arrow-left"},null,-1),Q={class:"d-flex align-center ga-2 mb-3 filed__label"},R=l("span",{class:"text-red"},"*",-1),W={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},X=l("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),Y={class:"d-flex align-center ga-2 mb-3 filed__label"},Z={class:"filed__input d-flex align-center ga-2 pa-2 rounded-lg"},ee={class:"d-flex align-center ga-2 mb-3 filed__label"},re=l("span",{class:"text-red"},"*",-1),se={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},ae=l("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),oe={class:"d-flex align-center justify-space-between mb-4 border-b pb-4"};function te(e,r,b,o,a,i){const C=u("loader"),v=u("filed-input"),m=u("v-col"),p=u("v-btn"),P=u("v-select"),_=u("v-row"),k=u("v-icon"),M=u("v-card"),F=u("v-dialog");return h(),w("div",H,[e.uiFlags.isLoading?(h(),f(C,{key:0})):(h(),w(U,{key:1},[l("div",J,[l("h2",K,d(i.isEditMerchant?e.$t("admin_merchant.edit_user_title"):e.$t("admin_merchant.add_new_user")),1),l("button",{class:"d-flex ga-2 align-center",onClick:r[0]||(r[0]=s=>e.$router.go(-1))},[l("span",null,d(e.$t("global.actions.back")),1),O])]),t(_,null,{default:n(()=>[(h(!0),w(U,null,N(i.merchantData,(s,A)=>(h(),f(m,{cols:"12",md:"6",key:A},{default:n(()=>[t(v,{label:s.label,modelValue:a.merchant[s.name],"onUpdate:modelValue":y=>a.merchant[s.name]=y,value:a.merchant[s.name],type:s.type,error:o.v$.merchant[s.name].$error,"error-text":s.errorText,onBlur:y=>o.v$.merchant[s.name].$touch()},null,8,["label","modelValue","onUpdate:modelValue","value","type","error","error-text","onBlur"])]),_:2},1024))),128)),i.isEditMerchant?g("",!0):(h(),f(m,{key:0,md:"6",cols:"12"},{default:n(()=>[t(v,{label:e.$t("admin_merchant.fields.password"),modelValue:a.merchant.password,"onUpdate:modelValue":r[1]||(r[1]=s=>a.merchant.password=s),value:a.merchant.password,type:"password",error:o.v$.merchant.password.$error,"error-text":o.v$.merchant.password.required.$invalid&&e.$t("errors.required"),"show-password":a.showPassword,onShowPassword:r[2]||(r[2]=s=>a.showPassword=!a.showPassword),onBlur:r[3]||(r[3]=s=>o.v$.merchant.password.$touch())},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1})),i.isEditMerchant?(h(),f(m,{key:1,md:"6",cols:"12"},{default:n(()=>[t(p,{onClick:r[4]||(r[4]=s=>a.showModel=!0)},{default:n(()=>[$(d(e.$t("global.actions.change_password")),1)]),_:1})]),_:1})):g("",!0),t(m,{md:"6",cols:"12"},{default:n(()=>[l("p",Q,[l("span",null,d(e.$t("admin_merchant.fields.role")),1),R]),t(P,{modelValue:a.merchant.role,"onUpdate:modelValue":r[5]||(r[5]=s=>a.merchant.role=s),items:a.rolesList,label:e.$t("admin_merchant.fields.role"),"item-title":"text","item-value":"value","menu-icon":"mdi mdi-chevron-down",error:o.v$.merchant.role.$error,"error-text":o.v$.merchant.role.required.$invalid&&e.$t("errors.required"),onBlur:r[6]||(r[6]=s=>o.v$.merchant.role.$touch())},null,8,["modelValue","items","label","error","error-text"]),o.v$.merchant.role.$dirty&&o.v$.merchant.role.required.$invalid?(h(),w("p",W,[X,l("span",null,d(e.$t("errors.required")),1)])):g("",!0)]),_:1}),t(m,{cols:"12",md:"6"},{default:n(()=>[l("p",Y,d(e.$t("admin_merchant.fields.avatar")),1),l("label",Z,[l("input",{type:"file",onInput:r[7]||(r[7]=s=>i.upload(s,"image"))},null,32)])]),_:1}),t(m,{cols:"12",md:"6"},{default:n(()=>[l("p",ee,[l("span",null,d(e.$t("admin_merchant.fields.status")),1),re]),t(P,{modelValue:a.merchant.status,"onUpdate:modelValue":r[8]||(r[8]=s=>a.merchant.status=s),placeholder:e.$t("admin_merchant.fields.status"),items:a.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:r[9]||(r[9]=s=>o.v$.merchant.status.$touch()),error:o.v$.merchant.status.$dirty&&o.v$.merchant.status.required.$invalid,"hide-details":"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","error","no-data-text"]),o.v$.merchant.status.$dirty&&o.v$.merchant.status.required.$invalid?(h(),w("p",se,[ae,l("span",null,d(e.$t("errors.required")),1)])):g("",!0)]),_:1}),t(m,{cols:"12"},{default:n(()=>[t(p,{class:"w-100",color:"primary",size:"large",onClick:i.actionBtn,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||o.v$.merchant.$error},{default:n(()=>[$(d(i.isEditMerchant?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})],64)),t(F,{modelValue:a.showModel,"onUpdate:modelValue":r[16]||(r[16]=s=>a.showModel=s),width:"auto",persistent:""},{default:n(()=>[t(M,{"min-width":"400",class:"pa-6 rounded-lg"},{default:n(()=>[l("div",oe,[l("h3",null,d(e.$t("global.actions.change_password")),1),t(p,{onClick:i.closeModel,icon:""},{default:n(()=>[t(k,null,{default:n(()=>[$("mdi mdi-close")]),_:1})]),_:1},8,["onClick"])]),t(_,null,{default:n(()=>[t(m,{cols:"12",md:"12"},{default:n(()=>[t(v,{label:e.$t("global.change_password.password"),modelValue:a.changePassword.password,"onUpdate:modelValue":r[10]||(r[10]=s=>a.changePassword.password=s),value:a.changePassword.password,type:"password",error:o.v$.changePassword.password.$error,"error-text":o.v$.changePassword.password.required.$invalid&&e.$t("errors.required"),onBlur:r[11]||(r[11]=s=>o.v$.changePassword.password.$touch()),onShowPassword:r[12]||(r[12]=s=>a.showPassword=!a.showPassword),"show-password":a.showPassword},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1}),t(m,{cols:"12",md:"12"},{default:n(()=>[t(v,{label:e.$t("global.change_password.confirm_password"),modelValue:a.changePassword.confirmPassword,"onUpdate:modelValue":r[13]||(r[13]=s=>a.changePassword.confirmPassword=s),value:a.changePassword.confirmPassword,type:"password",error:o.v$.changePassword.confirmPassword.$error,"error-text":o.v$.changePassword.confirmPassword.required.$invalid&&e.$t("errors.required")||o.v$.changePassword.confirmPassword.sameAs.$invalid&&e.$t("errors.password_mismatch"),onBlur:r[14]||(r[14]=s=>o.v$.changePassword.confirmPassword.$touch()),onShowPassword:r[15]||(r[15]=s=>a.showConfirmPassword=!a.showConfirmPassword),"show-password":a.showConfirmPassword},null,8,["label","modelValue","value","error","error-text","show-password"])]),_:1}),t(m,{cols:"12"},{default:n(()=>[t(p,{class:"w-100",color:"primary",size:"large",onClick:i.updatePassword,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||o.v$.changePassword.$error},{default:n(()=>[$(d(i.isEditMerchant?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}const ce=L(G,[["render",te]]);export{ce as default};
//# sourceMappingURL=UsersAdminCreate-aO3YXcae.js.map
