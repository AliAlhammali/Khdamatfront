import{u as C}from"./orders.merchant.store-9M_F6FAt.js";import{_ as x,r as n,o as b,c as k,a as l,w as i,F as U,i as D,f as Y,g as h,t as f,m as u,e as _,b as m,j as $}from"./index-CS9bw-lj.js";import{D as z}from"./DataTable-ClIaddqw.js";import{u as O}from"./services.merchant.store-Dx9FRhq7.js";import{u as V}from"./categories.merchant.store-hAEm9hUI.js";import{u as L}from"./clients.merchant.store-BqdwfQcy.js";import{u as S}from"./branches.merchant.store-D-2a5JRb.js";import"./api.helper-X78EMQNg.js";const A={props:{items:{type:Array,default:()=>[]},isLoading:{type:Boolean,default:!1},meta:{type:Object,default:()=>({})}},methods:{load(e){e.side==="end"&&(this.$emit("fetchItems"),e.done())}}};function I(e,t,g,B,r,s){const p=n("v-card-title"),o=n("v-card-subtitle"),d=n("v-card-item"),v=n("v-card-text"),y=n("v-btn"),P=n("v-card-actions"),M=n("v-card"),w=n("v-infinite-scroll");return b(),k("div",null,[l(w,{onLoad:s.load,items:g.items,side:"end"},{default:i(()=>[(b(!0),k(U,null,D(g.items,(c,a)=>(b(),Y(M,{key:a,loading:g.isLoading,class:"mb-4",elevation:"2"},{default:i(()=>[l(d,null,{default:i(()=>[l(p,null,{default:i(()=>[h(f(c.id)+"# ",1)]),_:2},1024),l(o,null,{default:i(()=>[h(f(c.started_at),1)]),_:2},1024)]),_:2},1024),l(v,null,{default:i(()=>[h(f(c.merchant_client.name),1)]),_:2},1024),l(P,null,{default:i(()=>[l(y,{to:c.id},{default:i(()=>[h("Click me")]),_:2},1032,["to"])]),_:2},1024)]),_:2},1032,["loading"]))),128))]),_:1},8,["onLoad","items"])])}const T=x(A,[["render",I]]),N={components:{DataTable:z,CardItem:T},data(){return{params:{"filter[keyword]":null,perPage:10,page:1,includeOrderMerchant:1,includeOrderSP:1,includeOrderMerchantUser:1,includeOrderMerchantClient:1,includeOrderMainCategory:1,includeOrderAddress:1,includeOrderItems:1,sortAsc:1},filtersParams:{"filter[started_to]":null,"filter[started_from]":null,"filter[service_provider_id]":null,"filter[status]":null,"filter[merchant_client_id]":null,"filter[main_category_id]":null,"filter[merchant_branch_id]":null},main_category_id:null}},async mounted(){await this.getOrdersMerchant(this.params),await this.getServicesMerchant(),await this.getMainCategoriesMerchant({"filter[isParent]":1,listing:1}),await this.getClientsMerchant(),await this.getBranchesMerchant()},computed:{...u(C,["records","uiFlags",""]),...u(O,{servicesMerchant:"records",uiFlagsServices:"uiFlags"}),...u(V,{categoriesMerchant:"records",mainCategoriesMerchant:"mainCategories"}),...u(L,{clientsMerchant:"records",uiFlagsClients:"uiFlags"}),...u(S,{branchesMerchant:"records",uiFlagsBranches:"uiFlags"}),headers(){return[{title:this.$t("global.order_number"),align:"start",sortable:!0,key:"id"},{title:this.$t("global.created_at"),align:"start",sortable:!0,key:"created_at"},{title:this.$t("global.main_category"),align:"start",sortable:!0,key:"main_category"},{title:this.$t("global.client_name"),align:"start",sortable:!0,key:"client_name"},{title:this.$t("global.client_phone"),align:"start",sortable:!0,key:"client_phone"},{title:this.$t("global.completed_at"),align:"start",sortable:!0,key:"completed_at"},{title:this.$t("admin_merchant.fields.total"),align:"start",sortable:!0,key:"totals.total"},{title:this.$t("admin_merchant.fields.status"),align:"start",sortable:!0,key:"status"},{title:"#",align:"start",sortable:!1,key:"actions"}]},items(){return this.records?.data?.map(e=>({...e,main_category:e.main_category.title?e.main_category.title[this.$i18n.locale]:"---",merchant_title:e.merchant?e.merchant.title:"---",client_name:e.merchant_client?e.merchant_client.name:"---",client_phone:e.merchant_client?e.merchant_client.phone:"---",completed_at:e.completed_at?e.completed_at:"---",status:e.status?this.$t(`global.order_status.${e.status}`):"---",pick_up_type:e.pick_up_type?this.$t(`global.order_type.${e.pick_up_type}`):"---",service_provider:e.service_provider?e.service_provider.title:"---"}))},orderStatus(){return[{value:"new",text:this.$t("global.order_status.new")},{value:"confirmed",text:this.$t("global.order_status.confirmed")},{value:"on_the_way",text:this.$t("global.order_status.on_the_way")},{value:"in_progress",text:this.$t("global.order_status.in_progress")},{value:"completed",text:this.$t("global.order_status.completed")},{value:"canceled",text:this.$t("global.order_status.canceled")}]},SPList(){return this.servicesMerchant?.data?.map(e=>({value:e.id,title:e.title?e.title[this.$i18n.locale]:"---"}))||[]},categoriesList(){return this.categoriesMerchant?.data?.map(e=>({value:e.id,title:e.title?e.title[this.$i18n.locale]:"---"}))||[]},mainCategoriesList(){return this.mainCategoriesMerchant?.data?.map(e=>({value:e.id,title:e.title?e.title[this.$i18n.locale]:"---"}))||[]},clientsList(){return this.clientsMerchant?.data?.map(e=>({value:e.id,title:e.name}))||[]},branchesList(){return this.branchesMerchant?.data?.map(e=>({value:e.id,title:e.name}))||[]}},methods:{..._(C,["getOrdersMerchant"]),..._(O,["getServicesMerchant"]),..._(V,["getCategoriesMerchant","getMainCategoriesMerchant"]),..._(L,["getClientsMerchant"]),..._(S,["getBranchesMerchant"]),async filterOrderBy(e,t){this.filtersParams[t]=e,await this.getOrdersMerchant({...this.filtersParams,...this.params})},async clearFilter(){this.filtersParams={"filter[started_to]":null,"filter[started_from]":null,"filter[service_provider_id]":null,"filter[status]":null,"filter[merchant_client_id]":null,"filter[main_category_id]":null,"filter[merchant_branch_id]":null,"filter[merchant_client_id]":null},this.main_category_id=null,await this.getOrdersMerchant({...this.params})},async changePage(e){this.params.page=e,await this.getOrdersMerchant(this.params)},async changePerPage(e){this.params.perPage=e,this.params.page=1,await this.getOrdersMerchant(this.params)},async search(e){this.params["filter[keyword]"]=e;const t={"filter[keyword]":e};await this.getOrdersMerchant(t)},beforeToday(e){return e&&e>new Date},afterToday(e){return e&&e<new Date},async fetchItemScroller(){this.records?.meta?.total,this.params.page}},watch:{main_category_id:{handler(){this.filtersParams["filter[main_category_id]"]=null}}}},j={class:"d-flex align-center ga-2"},E={class:"d-flex align-center ga-2"},q=["disabled"];function G(e,t,g,B,r,s){const p=n("date-picker"),o=n("v-col"),d=n("v-autocomplete"),v=n("v-select"),y=n("v-icon"),P=n("v-row"),M=n("v-tooltip"),w=n("router-link"),c=n("data-table");return b(),k("div",null,[l(c,{title:e.$t("admin_navbar_links.orders"),placeholder:e.$t("admin_merchant.search_placeholder_orders"),createPage:"/merchant/orders/create",headers:s.headers,"slots-items":["actions"],isLoading:e.uiFlags?.isLoading,items:s.items,meta:e.records?.meta,onChangePage:s.changePage,onChangePerPage:s.changePerPage,onSearch:s.search,hasFilter:!0},{filter:i(()=>[l(P,null,{default:i(()=>[l(o,{md:"3",cols:"12"},{default:i(()=>[m("div",j,[m("p",null,f(e.$t("global.started_from")),1),l(p,{editable:!1,placeholder:e.$t("global.started_from"),modelValue:r.filtersParams["filter[started_from]"],"onUpdate:modelValue":t[0]||(t[0]=a=>r.filtersParams["filter[started_from]"]=a),value:r.filtersParams["filter[started_from]"],"onUpdate:value":t[1]||(t[1]=a=>r.filtersParams["filter[started_from]"]=a),type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD",onChange:t[2]||(t[2]=a=>s.filterOrderBy(a,"filter[started_from]"))},null,8,["placeholder","modelValue","value"])])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[m("div",E,[m("p",null,f(e.$t("global.started_to")),1),l(p,{editable:!1,placeholder:e.$t("global.started_to"),modelValue:r.filtersParams["filter[started_to]"],"onUpdate:modelValue":t[3]||(t[3]=a=>r.filtersParams["filter[started_to]"]=a),value:r.filtersParams["filter[started_to]"],"onUpdate:value":t[4]||(t[4]=a=>r.filtersParams["filter[started_to]"]=a),type:"date",class:"mb-2 w-100","value-type":"format",format:"YYYY-MM-DD",onChange:t[5]||(t[5]=a=>s.filterOrderBy(a,"filter[started_to]"))},null,8,["placeholder","modelValue","value"])])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{placeholder:e.$t("global.main_category"),label:e.$t("global.main_category"),modelValue:r.main_category_id,"onUpdate:modelValue":[t[6]||(t[6]=a=>r.main_category_id=a),t[7]||(t[7]=a=>e.getCategoriesMerchant({"filter[parent_id]":a,listing:1}))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:s.mainCategoriesList,"item-title":"title","item-value":"value"},null,8,["placeholder","label","modelValue","no-data-text","items"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{placeholder:e.$t("admin_navbar_links.categories"),label:e.$t("admin_navbar_links.categories"),modelValue:r.filtersParams["filter[main_category_id]"],"onUpdate:modelValue":[t[8]||(t[8]=a=>r.filtersParams["filter[main_category_id]"]=a),t[9]||(t[9]=a=>s.filterOrderBy(a,"filter[main_category_id]"))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:s.categoriesList,"item-title":"title","item-value":"value",disabled:!r.main_category_id},null,8,["placeholder","label","modelValue","no-data-text","items","disabled"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{placeholder:e.$t("global.client_name"),label:e.$t("global.client_name"),modelValue:r.filtersParams["filter[merchant_client_id]"],"onUpdate:modelValue":[t[10]||(t[10]=a=>r.filtersParams["filter[merchant_client_id]"]=a),t[11]||(t[11]=a=>s.filterOrderBy(a,"filter[merchant_client_id]"))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:s.clientsList,"item-title":"title","item-value":"value"},null,8,["placeholder","label","modelValue","no-data-text","items"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{placeholder:e.$t("admin_navbar_links.branches"),label:e.$t("admin_navbar_links.branches"),modelValue:r.filtersParams["filter[merchant_branch_id]"],"onUpdate:modelValue":[t[12]||(t[12]=a=>r.filtersParams["filter[merchant_branch_id]"]=a),t[13]||(t[13]=a=>s.filterOrderBy(a,"filter[merchant_branch_id]"))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:s.branchesList,"item-title":"title","item-value":"value"},null,8,["placeholder","label","modelValue","no-data-text","items"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(v,{placeholder:e.$t("admin_merchant.fields.status"),label:e.$t("admin_merchant.fields.status"),modelValue:r.filtersParams["filter[status]"],"onUpdate:modelValue":[t[14]||(t[14]=a=>r.filtersParams["filter[status]"]=a),t[15]||(t[15]=a=>s.filterOrderBy(a,"filter[status]"))],"menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl mb-2 w-100","no-data-text":e.$t("global.actions.no_data"),"hide-details":"",outlined:"",items:s.orderStatus,"item-title":"text","item-value":"value"},null,8,["placeholder","label","modelValue","no-data-text","items"])]),_:1}),l(o,{cols:"2"},{default:i(()=>[m("button",{class:"pa-3 rounded border text-error",onClick:t[16]||(t[16]=(...a)=>s.clearFilter&&s.clearFilter(...a)),disabled:!r.filtersParams["filter[started_from]"]&&!r.filtersParams["filter[started_to]"]&&!r.filtersParams["filter[service_provider_id]"]&&!r.filtersParams["filter[status]"]&&!r.filtersParams["filter[merchant_client_id]"]&&!r.filtersParams["filter[main_category_id]"]&&!r.filtersParams["filter[merchant_branch_id]"]&&!r.filtersParams["filter[merchant_client_id]"]},[l(y,{size:"24"},{default:i(()=>[h("mdi mdi-filter-variant-remove")]),_:1})],8,q)]),_:1})]),_:1})]),actions:i(({item:a})=>[l(w,{to:`/merchant/orders/${a.item.id}`,class:"button button--edit px-2 rounded"},{default:i(()=>[l(M,{text:e.$t("global.actions.show")},{activator:i(({props:F})=>[m("span",$(F,{class:"mdi mdi-24px mdi-eye-outline"}),null,16)]),_:1},8,["text"])]),_:2},1032,["to"])]),_:1},8,["title","placeholder","headers","isLoading","items","meta","onChangePage","onChangePerPage","onSearch"])])}const ee=x(N,[["render",G]]);export{ee as default};
//# sourceMappingURL=OrdersMerchantList-BswR2AQo.js.map
