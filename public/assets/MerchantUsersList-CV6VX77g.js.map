{"version":3,"file":"MerchantUsersList-CV6VX77g.js","sources":["../../src/views/Admin/Dashboard/merchantUsers/MerchantUsersList.vue"],"sourcesContent":["<template>\r\n  <div class=\"\">\r\n    <!-- :create-page=\"'/admin/merchant-users/create'\" -->\r\n    <data-table\r\n      :title=\"$t('admin_navbar_links.merchant_users')\"\r\n      :placeholder=\"$t('admin_merchant.search_placeholder_users')\"\r\n      :headers=\"headers\"\r\n      :slots-items=\"['', 'status', 'role']\"\r\n      :isLoading=\"uiFlags?.isLoading\"\r\n      :items=\"items\"\r\n      :meta=\"records?.meta\"\r\n      :has-filter=\"true\"\r\n      @changePage=\"changePage\"\r\n      @changePerPage=\"changePerPage\"\r\n      @search=\"search\"\r\n    >\r\n      <template #filter>\r\n        <v-row>\r\n          <v-col md=\"3\" cols=\"12\">\r\n            <v-select\r\n              v-model=\"filtersParams['filter[merchant_id]']\"\r\n              :placeholder=\"$t('admin_merchant.fields.merchant')\"\r\n              :label=\"$t('admin_merchant.fields.merchant')\"\r\n              :items=\"merchants.data\"\r\n              :item-title=\"'title'\"\r\n              :item-value=\"'id'\"\r\n              outlined\r\n              menu-icon=\"mdi mdi-chevron-down\"\r\n              class=\"text-capitalize rounded-xl\"\r\n              :no-data-text=\"$t('global.actions.no_data')\"\r\n              hide-details\r\n              @update:modelValue=\"\r\n                (val) => filterOrderBy(val, 'filter[merchant_id]')\r\n              \"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col md=\"3\" cols=\"12\">\r\n            <v-select\r\n              v-model=\"filtersParams['filter[role]']\"\r\n              :placeholder=\"$t('admin_merchant.fields.role')\"\r\n              :label=\"$t('admin_merchant.fields.role')\"\r\n              :items=\"rolesList\"\r\n              :item-title=\"'text'\"\r\n              :item-value=\"'value'\"\r\n              outlined\r\n              menu-icon=\"mdi mdi-chevron-down\"\r\n              class=\"text-capitalize rounded-xl\"\r\n              :no-data-text=\"$t('global.actions.no_data')\"\r\n              hide-details\r\n              @update:modelValue=\"(val) => filterOrderBy(val, 'filter[role]')\"\r\n            />\r\n          </v-col>\r\n\r\n          <v-col md=\"3\" cols=\"12\">\r\n            <v-select\r\n              v-model=\"filtersParams['filter[status]']\"\r\n              :placeholder=\"$t('admin_merchant.fields.status')\"\r\n              :label=\"$t('admin_merchant.fields.status')\"\r\n              :items=\"listStatus\"\r\n              :item-title=\"'text'\"\r\n              :item-value=\"'value'\"\r\n              outlined\r\n              menu-icon=\"mdi mdi-chevron-down\"\r\n              class=\"text-capitalize rounded-xl\"\r\n              :no-data-text=\"$t('global.actions.no_data')\"\r\n              hide-details\r\n              @update:modelValue=\"(val) => filterOrderBy(val, 'filter[status]')\"\r\n            />\r\n          </v-col>\r\n          <v-col cols=\"2\">\r\n            <button\r\n              class=\"pa-3 rounded border text-error\"\r\n              @click=\"clearFilter\"\r\n              :disabled=\"\r\n                !filtersParams['filter[merchant_id]'] &&\r\n                !filtersParams['filter[role]'] &&\r\n                !filtersParams['filter[status]']\r\n              \"\r\n            >\r\n              <v-icon size=\"24\">mdi mdi-filter-variant-remove</v-icon>\r\n            </button>\r\n          </v-col>\r\n        </v-row>\r\n      </template>\r\n      <template #role=\"{ item }\">\r\n        <span class=\"badge badge--status\">\r\n          {{ $t(`global.role.${item.item.role}`) }}\r\n        </span>\r\n      </template>\r\n      <template #status=\"{ item }\">\r\n        <span\r\n          class=\"badge badge--status\"\r\n          :class=\"\r\n            item.item.status === 'active' ? 'badge--success' : 'badge--danger'\r\n          \"\r\n        >\r\n          {{ $t(`global.status.${item.item.status}`) }}\r\n        </span>\r\n      </template>\r\n      <!-- <template #actions=\"{ item }\">\r\n        <div class=\"d-flex ga-2 align-center\">\r\n          <router-link\r\n            :to=\"`/admin/merchant-users/${item.item.id}/edit`\"\r\n            class=\"button button--edit px-2 rounded\"\r\n          >\r\n            <v-tooltip :text=\"$t('global.actions.edit')\">\r\n              <template v-slot:activator=\"{ props }\">\r\n                <span v-bind=\"props\" class=\"mdi mdi-24px mdi-pencil\"></span>\r\n              </template>\r\n            </v-tooltip>\r\n          </router-link>\r\n          <button\r\n            class=\"button button--delete px-2 rounded\"\r\n            @click=\"deleteRecord(item.item)\"\r\n          >\r\n            <v-tooltip :text=\"$t('global.actions.delete')\">\r\n              <template v-slot:activator=\"{ props }\">\r\n                <span v-bind=\"props\" class=\"mdi mdi-24px mdi-delete\"></span>\r\n              </template>\r\n            </v-tooltip>\r\n          </button>\r\n        </div>\r\n      </template> -->\r\n    </data-table>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { useMerchantUsersAdminStore } from \"@/stores/admin/merchant/merchantUsers.admin.store\";\r\nimport { useMerchantAdminStore } from \"@/stores/admin/merchant/merchant.admin.store\";\r\nimport { mapActions, mapState } from \"pinia\";\r\nimport DataTable from \"@/components/common/DataTable.vue\";\r\nimport ConfirmDialog from \"@/components/common/ConfirmDialog.vue\";\r\nimport { showConfirmationDialog } from \"@/helper/showAlert.helper\";\r\nexport default {\r\n  components: { DataTable, ConfirmDialog },\r\n  data() {\r\n    return {\r\n      params: {\r\n        \"filter[keyword]\": null,\r\n        perPage: 10,\r\n        page: 1,\r\n      },\r\n      filtersParams: {\r\n        \"filter[merchant_id]\": null,\r\n        \"filter[status]\": null,\r\n        \"filter[role]\": null,\r\n      },\r\n      listStatus: [\r\n        {\r\n          text: this.$t(\"global.status.active\"),\r\n          value: \"active\",\r\n        },\r\n        {\r\n          text: this.$t(\"global.status.inactive\"),\r\n          value: \"inactive\",\r\n        },\r\n      ],\r\n      rolesList: [\r\n        {\r\n          text: this.$t(\"global.role.admin\"),\r\n          value: \"admin\",\r\n        },\r\n        {\r\n          text: this.$t(\"global.role.staff\"),\r\n          value: \"staff\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  async mounted() {\r\n    await this.getMerchantAdmin({\r\n      listing: 1,\r\n    });\r\n    if (this.$route.query.merchant_id) {\r\n      this.params[\"filter[merchant_id]\"] = this.merchants.data.find(\r\n        (item) => item.id == this.$route.query.merchant_id\r\n      ).id;\r\n    }\r\n    await this.getMerchantUsersAdmin(this.params);\r\n  },\r\n  computed: {\r\n    ...mapState(useMerchantUsersAdminStore, [\"records\", \"uiFlags\"]),\r\n    ...mapState(useMerchantAdminStore, {\r\n      merchants: \"records\",\r\n      merchantsUiFlags: \"uiFlags\",\r\n    }),\r\n\r\n    headers() {\r\n      return [\r\n        {\r\n          title: \"#\",\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"id\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.name\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"name\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.phone\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"phone\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.email\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"email\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.merchant\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"merchant.title\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.role\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"role\",\r\n        },\r\n        {\r\n          title: this.$t(\"admin_merchant.fields.status\"),\r\n          align: \"start\",\r\n          sortable: true,\r\n          key: \"status\",\r\n        },\r\n        // {\r\n        //   title: \"#\",\r\n        //   align: \"start\",\r\n        //   sortable: false,\r\n        //   key: \"actions\",\r\n        // },\r\n      ];\r\n    },\r\n    items() {\r\n      return this.records?.data.map((item) => {\r\n        return {\r\n          ...item,\r\n          address: item.address ? item.address : \"---\",\r\n          phone: item.phone ? item.phone : \"---\",\r\n          email: item.email ? item.email : \"---\",\r\n          status: item.status ? item.status : \"---\",\r\n          role: item.role ? item.role : \"---\",\r\n        };\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(useMerchantUsersAdminStore, [\r\n      \"getMerchantUsersAdmin\",\r\n      \"deleteMerchantUsersAdmin\",\r\n    ]),\r\n\r\n    ...mapActions(useMerchantAdminStore, [\"getMerchantAdmin\"]),\r\n\r\n    async deleteRecord(item) {\r\n      const result = await showConfirmationDialog({\r\n        title: this.$t(\"global.actions.delete\"),\r\n        text: this.$t(\"global.actions.delete_confirmation\") + item.name,\r\n        confirmButtonText: this.$t(\"global.actions.delete\"),\r\n        cancelButtonText: this.$t(\"global.actions.cancel\"),\r\n      });\r\n      if (result.isConfirmed) {\r\n        await this.deleteMerchantUsersAdmin(item.id);\r\n        await this.getMerchantUsersAdmin(this.params);\r\n      }\r\n    },\r\n\r\n    async changePage(page) {\r\n      this.params.page = page;\r\n      await this.getMerchantUsersAdmin(this.params);\r\n    },\r\n    async changePerPage(perPage) {\r\n      this.params.perPage = perPage;\r\n      this.params.page = 1;\r\n      await this.getMerchantUsersAdmin(this.params);\r\n    },\r\n    async search(text) {\r\n      this.params[\"filter[keyword]\"] = text;\r\n      const key = {\r\n        \"filter[keyword]\": text,\r\n      };\r\n      this.getMerchantUsersAdmin(key);\r\n    },\r\n    async filterOrderBy(value, key) {\r\n      this.filtersParams[key] = value;\r\n      await this.getMerchantUsersAdmin({\r\n        ...this.params,\r\n        ...this.filtersParams,\r\n      });\r\n    },\r\n    async clearFilter() {\r\n      this.filtersParams[\"filter[status]\"] = null;\r\n      this.filtersParams[\"filter[merchant_id]\"] = null;\r\n      this.filtersParams[\"filter[role]\"] = null;\r\n      await this.getMerchantUsersAdmin({\r\n        ...this.params,\r\n      });\r\n    },\r\n  },\r\n  watch: {\r\n    $route(to, from) {\r\n      if (to.query.merchant_id) {\r\n        this.params[\"filter[merchant_id]\"] = this.merchants.data.find(\r\n          (item) => item.id == to.query.merchant_id\r\n        ).id;\r\n      } else {\r\n        this.params[\"filter[merchant_id]\"] = null;\r\n      }\r\n      this.getMerchantUsersAdmin(this.params);\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["_sfc_main","DataTable","ConfirmDialog","item","mapState","useMerchantUsersAdminStore","useMerchantAdminStore","mapActions","showConfirmationDialog","page","perPage","text","key","value","to","from","_hoisted_1","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_createVNode","_component_data_table","_ctx","$options","_component_v_row","_withCtx","_component_v_col","_component_v_select","$data","$event","val","_createElementVNode","args","_component_v_icon","_createTextVNode","_toDisplayString","_normalizeClass"],"mappings":"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"}