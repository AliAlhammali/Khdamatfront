import{F as q,u as A,r as h}from"./index-COJIqLJ_.js";import{_ as F,m as $,e as b,r as u,o as d,c as g,f as p,F as E,b as r,t as s,a as l,w as o,h as v,g as M}from"./index-CS9bw-lj.js";import{u as y}from"./merchant.admin.store-CfqCq9f2.js";import{u as V}from"./categories.admin.store-BBluZAiq.js";import{L as x}from"./Loader-B8eGEbwu.js";import{u as B}from"./update.inputs.helper-BL7S9VQe.js";import"./api.helper-X78EMQNg.js";const U={components:{FiledInput:q,Loader:x},setup(){return{v$:A()}},validations(){return{merchant:{title:{ar:{required:h},en:{required:h}},merchant_id:{required:h},status:{required:h}}}},data(){return{merchant:{title:{ar:"",en:""},status:null,merchant_id:null,parent_id:null},listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}]}},async mounted(){if(this.isEditMerchant){const e=this.$route.params.id;await this.showCategoriesAdmin(e),this.merchant={...this.record},this.merchant.title={ar:this.record.title.ar,en:this.record.title.en},this.merchant.parent_id=this.record?.parent?.id}this.$route.query?.merchant_id&&(this.merchant.merchant_id=+this.$route.query.merchant_id),await this.getCategoriesAdmin({"filter[isParent]":1,listing:1}),await this.getMerchantAdmin({listing:1})},computed:{...$(y,{merchants:"records",merchantsUiFlags:"uiFlags"}),...$(V,["uiFlags","record","records"]),isEditMerchant(){return this.$route.name==="admin-categories-edit"},categoryList(){return(this.isEditMerchant?this.records?.data?.filter(t=>t.id!==this.record.id):this.records?.data)?.map(t=>({...t,title:t.title[this.$i18n.locale]}))}},methods:{...b(V,["createCategoriesAdmin","showCategoriesAdmin","updateCategoriesAdmin","getCategoriesAdmin"]),...b(y,["getMerchantAdmin"]),actionBtn(){if(this.v$.$touch(),!this.v$.$error)if(this.isEditMerchant){const e=B(this.merchant,this.record);this.updateCategoriesAdmin(this.record.id,e);return}else this.createCategoriesAdmin({...this.merchant})}}},L={class:"content"},S={class:"d-flex border-b mb-4 pb-4 justify-space-between"},N={class:""},z=r("span",{class:"fa fa-arrow-left"},null,-1),D={class:"d-flex align-center ga-2 mb-3 filed__label"},P=r("span",{class:"text-red"},"*",-1),T={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},j=r("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),I={class:"d-flex align-center ga-2 mb-3 filed__label"},G=r("span",{class:"text-red"},"*",-1),H={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},J=r("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),K={class:"d-flex align-center ga-2 mb-3 filed__label"};function O(e,t,Q,a,i,m){const C=u("loader"),f=u("filed-input"),c=u("v-col"),_=u("v-select"),w=u("v-btn"),k=u("v-row");return d(),g("div",L,[e.uiFlags.isLoading?(d(),p(C,{key:0})):(d(),g(E,{key:1},[r("div",S,[r("h2",N,s(m.isEditMerchant?e.$t("admin_categories.edit_title_category"):e.$t("admin_categories.add_title_category")),1),r("button",{class:"d-flex ga-2 align-center",onClick:t[0]||(t[0]=n=>e.$router.go(-1))},[r("span",null,s(e.$t("global.actions.back")),1),z])]),l(k,null,{default:o(()=>[l(c,{md:"6",cols:"12"},{default:o(()=>[l(f,{label:e.$t("admin_categories.fields.title_ar"),modelValue:i.merchant.title.ar,"onUpdate:modelValue":t[1]||(t[1]=n=>i.merchant.title.ar=n),value:i.merchant.title.ar,type:"text",error:a.v$.merchant.title.ar.$error,"error-text":a.v$.merchant.title.ar.required.$invalid&&e.$t("errors.required"),onBlur:t[2]||(t[2]=n=>a.v$.merchant.title.ar.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),l(c,{md:"6",cols:"12"},{default:o(()=>[l(f,{label:e.$t("admin_categories.fields.title_en"),modelValue:i.merchant.title.en,"onUpdate:modelValue":t[3]||(t[3]=n=>i.merchant.title.en=n),value:i.merchant.title.en,type:"text",error:a.v$.merchant.title.en.$error,"error-text":a.v$.merchant.title.en.required.$invalid&&e.$t("errors.required"),onBlur:t[4]||(t[4]=n=>a.v$.merchant.title.en.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),m.isEditMerchant?v("",!0):(d(),p(c,{key:0,cols:"12",md:"6"},{default:o(()=>[r("p",D,[r("span",null,s(e.$t("admin_categories.fields.merchant_id")),1),P]),l(_,{modelValue:i.merchant.merchant_id,"onUpdate:modelValue":t[5]||(t[5]=n=>i.merchant.merchant_id=n),placeholder:e.$t("admin_categories.fields.merchant_id"),items:e.merchants?.data,"item-title":"title","item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"",error:a.v$.merchant.merchant_id.$dirty&&a.v$.merchant.merchant_id.required.$invalid,"no-data-text":e.$t("global.actions.no_data"),onBlur:t[6]||(t[6]=n=>a.v$.merchant.merchant_id.$touch())},null,8,["modelValue","placeholder","items","error","no-data-text"]),a.v$.merchant.merchant_id.$dirty&&a.v$.merchant.merchant_id.required.$invalid?(d(),g("p",T,[j,r("span",null,s(e.$t("errors.required")),1)])):v("",!0)]),_:1})),l(c,{cols:"12",md:"6"},{default:o(()=>[r("p",I,[r("span",null,s(e.$t("admin_merchant.fields.status")),1),G]),l(_,{modelValue:i.merchant.status,"onUpdate:modelValue":t[7]||(t[7]=n=>i.merchant.status=n),placeholder:e.$t("admin_merchant.fields.status"),items:i.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:t[8]||(t[8]=n=>a.v$.merchant.status.$touch()),error:a.v$.merchant.status.$dirty&&a.v$.merchant.status.required.$invalid,"hide-details":"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","error","no-data-text"]),a.v$.merchant.status.$dirty&&a.v$.merchant.status.required.$invalid?(d(),g("p",H,[J,r("span",null,s(e.$t("errors.required")),1)])):v("",!0)]),_:1}),!m.isEditMerchant&&i.merchant.merchant_id?(d(),p(c,{key:1,cols:"12",md:"6"},{default:o(()=>[r("p",K,[r("span",null,s(e.$t("admin_navbar_links.categories")),1)]),l(_,{modelValue:i.merchant.parent_id,"onUpdate:modelValue":t[9]||(t[9]=n=>i.merchant.parent_id=n),placeholder:e.$t("admin_navbar_links.categories"),items:m.categoryList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","hide-details":"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","no-data-text"])]),_:1})):v("",!0),l(c,{cols:"12"},{default:o(()=>[l(w,{class:"w-100",color:"primary",size:"large",onClick:m.actionBtn,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||a.v$.merchant.$error},{default:o(()=>[M(s(m.isEditMerchant?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})],64))])}const ae=F(U,[["render",O]]);export{ae as default};
//# sourceMappingURL=CategoriesCreate-DlwXMtfW.js.map
