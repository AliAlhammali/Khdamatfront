{"version":3,"file":"auth.admin.store-Br7DKRa0.js","sources":["../../src/services/admin/auth/auth.admin.service.js","../../src/stores/admin/auth/auth.admin.store.js"],"sourcesContent":["import ApiClient from \"@/helper/api.helper\";\r\n\r\nclass AuthAdmin extends ApiClient {\r\n  constructor() {\r\n    super(\"admin-auth\");\r\n  }\r\n\r\n  login(data) {\r\n    return axios.post(`${this.url}/login`, data);\r\n  }\r\n\r\n  logout() {\r\n    return axios.post(`${this.url}/logout`);\r\n  }\r\n}\r\n\r\nexport default new AuthAdmin();\r\n","import { defineStore } from \"pinia\";\r\nimport router from \"@/router\";\r\nimport authAdminService from \"@/services/admin/auth/auth.admin.service\";\r\n\r\nexport const useAuthAdminStore = defineStore(\"AuthAdmin\", {\r\n  state: () => ({\r\n    record: null,\r\n    isLoading: false,\r\n  }),\r\n  getters: {},\r\n  actions: {\r\n    loginAdmin: async function(admin) {\r\n      this.isLoading = true;\r\n      try {\r\n        const { data } = await authAdminService.login(admin);\r\n        this.record = data.user;\r\n\r\n        // Save token to cookies\r\n        $cookies.set(\"admin_khadamat_token\", data.token, \"1m\");\r\n        $cookies.set(\"admin_khadamat_user\", data.user, \"1m\");\r\n\r\n        router.push({ name: \"admin-dashboard\" });\r\n      } catch (error) {\r\n        return false;\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    logoutAdmin: async function() {\r\n      await authAdminService.logout();\r\n      $cookies.remove(\"admin_khadamat_token\");\r\n      $cookies.remove(\"admin_khadamat_user\");\r\n      this.record = null;\r\n      router.push({ name: \"admin-login\" });\r\n      window.location.reload();\r\n    },\r\n\r\n    checkCookie: function() {\r\n      const token = $cookies.get(\"admin_khadamat_token\");\r\n      const user = $cookies.get(\"admin_khadamat_user\");\r\n\r\n      if (token && user) {\r\n        this.record = user;\r\n      } else {\r\n        router.push({ name: \"admin-login\" });\r\n      }\r\n    },\r\n  },\r\n});\r\n"],"names":["AuthAdmin","ApiClient","data","authAdminService","useAuthAdminStore","defineStore","admin","router","token","user"],"mappings":"4FAEA,MAAMA,UAAkBC,CAAU,CAChC,aAAc,CACZ,MAAM,YAAY,CACnB,CAED,MAAMC,EAAM,CACV,OAAO,MAAM,KAAK,GAAG,KAAK,GAAG,SAAUA,CAAI,CAC5C,CAED,QAAS,CACP,OAAO,MAAM,KAAK,GAAG,KAAK,GAAG,SAAS,CACvC,CACH,CAEA,MAAeC,EAAA,IAAIH,ECZNI,EAAoBC,EAAY,YAAa,CACxD,MAAO,KAAO,CACZ,OAAQ,KACR,UAAW,EACf,GACE,QAAS,CAAE,EACX,QAAS,CACP,WAAY,eAAeC,EAAO,CAChC,KAAK,UAAY,GACjB,GAAI,CACF,KAAM,CAAE,KAAAJ,CAAI,EAAK,MAAMC,EAAiB,MAAMG,CAAK,EACnD,KAAK,OAASJ,EAAK,KAGnB,SAAS,IAAI,uBAAwBA,EAAK,MAAO,IAAI,EACrD,SAAS,IAAI,sBAAuBA,EAAK,KAAM,IAAI,EAEnDK,EAAO,KAAK,CAAE,KAAM,iBAAmB,CAAA,CACxC,MAAe,CACd,MAAO,EACf,QAAgB,CACR,KAAK,UAAY,EAClB,CACF,EAED,YAAa,gBAAiB,CAC5B,MAAMJ,EAAiB,SACvB,SAAS,OAAO,sBAAsB,EACtC,SAAS,OAAO,qBAAqB,EACrC,KAAK,OAAS,KACdI,EAAO,KAAK,CAAE,KAAM,aAAe,CAAA,EACnC,OAAO,SAAS,QACjB,EAED,YAAa,UAAW,CACtB,MAAMC,EAAQ,SAAS,IAAI,sBAAsB,EAC3CC,EAAO,SAAS,IAAI,qBAAqB,EAE3CD,GAASC,EACX,KAAK,OAASA,EAEdF,EAAO,KAAK,CAAE,KAAM,aAAe,CAAA,CAEtC,CACF,CACH,CAAC"}