import{F as w,u as A,r as m}from"./index-COJIqLJ_.js";import{_ as k,m as $,e as f,r as h,o as c,c as v,f as b,F,b as n,t as s,a as l,w as o,h as _,g as B}from"./index-CS9bw-lj.js";import{u as y}from"./merchant.admin.store-CfqCq9f2.js";import{u as V}from"./services.admin.store-DWSu6_on.js";import{L as U}from"./Loader-B8eGEbwu.js";import{u as q}from"./categories.admin.store-BBluZAiq.js";import{u as M}from"./update.inputs.helper-BL7S9VQe.js";import"./api.helper-X78EMQNg.js";const E={components:{FiledInput:w,Loader:U},setup(){return{v$:A()}},validations(){return{merchant:{title:{ar:{required:m},en:{required:m}},merchant_id:{required:m},main_category_id:{required:m},category_id:{required:m},status:{required:m},cost_price:{required:m},sp_price:{required:m},price:{required:m}}}},data(){return{merchant:{title:{ar:"",en:""},status:null,merchant_id:null,main_category_id:null,category_id:null,sp_price:null,cost_price:null,price:null},listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}]}},async mounted(){if(this.isEditMerchant){const e=this.$route.params.id;await this.showServicesAdmin(e),await this.getSubCategoriesAdmin({"filter[parent_id]":this.record.main_category_id,listing:1}),this.merchant={...this.record},this.merchant.title={...this.record.title},this.merchant.category_id=this.record.category_id,this.merchant.sp_price=this.record.sp_price,this.merchant.cost_price=this.record.cost_price,this.merchant.price=this.record.price}this.$route.query?.merchant_id&&(this.merchant.merchant_id=+this.$route.query.merchant_id),await this.getMerchantAdmin({listing:1}),await this.getCategoriesAdmin({"filter[isParent]":1,listing:1})},computed:{...$(y,{merchants:"records",merchantsUiFlags:"uiFlags"}),...$(V,["uiFlags","record"]),...$(q,{categories:"records",categoriesUiFlags:"uiFlags",subCategories:"subCategories",uiFlagsSub:"uiFlagsSub"}),isEditMerchant(){return this.$route.name==="admin-service-edit"},categoryList(){return this.categories?.data?.map(e=>({...e,title:e.title[this.$i18n.locale]}))},subCategoryList(){return this.subCategories?.map(e=>({...e,title:e.title[this.$i18n.locale]}))}},methods:{...f(V,["createServicesAdmin","showServicesAdmin","updateServicesAdmin"]),...f(y,["getMerchantAdmin"]),...f(q,["getCategoriesAdmin","getSubCategoriesAdmin"]),actionBtn(){if(this.v$.$touch(),!this.v$.$error)if(this.isEditMerchant){const e=M(this.merchant,this.record);this.updateServicesAdmin(this.record.id,e);return}else this.createServicesAdmin({...this.merchant})}}},L={class:"content"},z={class:"d-flex border-b mb-4 pb-4 justify-space-between"},N={class:""},P=n("span",{class:"fa fa-arrow-left"},null,-1),D={class:"d-flex align-center ga-2 mb-3 filed__label"},T=n("span",{class:"text-red"},"*",-1),j={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},I=n("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),G={class:"d-flex align-center ga-2 mb-3 filed__label"},H=n("span",{class:"text-red"},"*",-1),J={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},K=n("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),O={class:"d-flex align-center ga-2 mb-3 filed__label"},Q=n("span",{class:"text-red"},"*",-1),R={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},W=n("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1),X={class:"d-flex align-center ga-2 mb-3 filed__label"},Y=n("span",{class:"text-red"},"*",-1),Z={key:0,class:"text-error mt-2 d-flex ga-2 align-center"},ee=n("span",{class:"mdi mdi-24px mdi-alert-circle-outline"},null,-1);function te(e,t,re,r,i,u){const C=h("loader"),g=h("filed-input"),d=h("v-col"),p=h("v-select"),x=h("v-btn"),S=h("v-row");return c(),v("div",L,[e.uiFlags.isLoading?(c(),b(C,{key:0})):(c(),v(F,{key:1},[n("div",z,[n("h2",N,s(u.isEditMerchant?e.$t("admin_services.edit_title_service"):e.$t("admin_services.add_title_service")),1),n("button",{class:"d-flex ga-2 align-center",onClick:t[0]||(t[0]=a=>e.$router.go(-1))},[n("span",null,s(e.$t("global.actions.back")),1),P])]),l(S,null,{default:o(()=>[l(d,{md:"6",cols:"12"},{default:o(()=>[l(g,{label:e.$t("admin_categories.fields.title_ar"),modelValue:i.merchant.title.ar,"onUpdate:modelValue":t[1]||(t[1]=a=>i.merchant.title.ar=a),value:i.merchant.title.ar,type:"text",error:r.v$.merchant.title.ar.$error,"error-text":r.v$.merchant.title.ar.required.$invalid&&e.$t("errors.required"),onBlur:t[2]||(t[2]=a=>r.v$.merchant.title.ar.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),l(d,{md:"6",cols:"12"},{default:o(()=>[l(g,{label:e.$t("admin_categories.fields.title_en"),modelValue:i.merchant.title.en,"onUpdate:modelValue":t[3]||(t[3]=a=>i.merchant.title.en=a),value:i.merchant.title.en,type:"text",error:r.v$.merchant.title.en.$error,"error-text":r.v$.merchant.title.en.required.$invalid&&e.$t("errors.required"),onBlur:t[4]||(t[4]=a=>r.v$.merchant.title.en.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),u.isEditMerchant?_("",!0):(c(),b(d,{key:0,cols:"12",md:"6"},{default:o(()=>[n("p",D,[n("span",null,s(e.$t("admin_categories.fields.merchant_id")),1),T]),l(p,{modelValue:i.merchant.merchant_id,"onUpdate:modelValue":[t[5]||(t[5]=a=>i.merchant.merchant_id=a),t[7]||(t[7]=()=>{e.getCategoriesAdmin({"filter[merchant_id]":i.merchant.merchant_id,"filter[isParent]":1,listing:1}),this.merchant.main_category_id=null,this.v$.merchant.main_category_id.$reset()})],placeholder:e.$t("admin_categories.fields.merchant_id"),items:e.merchants?.data,"item-text":"name","item-value":"id","menu-icon":"mdi mdi-chevron-down",class:"w-100",outlined:"",error:r.v$.merchant.merchant_id.$dirty&&r.v$.merchant.merchant_id.required.$invalid,"no-data-text":e.$t("global.actions.no_data"),onBlur:t[6]||(t[6]=a=>r.v$.merchant.merchant_id.$touch())},null,8,["modelValue","placeholder","items","error","no-data-text"]),r.v$.merchant.merchant_id.$dirty&&r.v$.merchant.merchant_id.required.$invalid?(c(),v("p",j,[I,n("span",null,s(e.$t("errors.required")),1)])):_("",!0)]),_:1})),l(d,{cols:"12",md:"6"},{default:o(()=>[n("p",G,[n("span",null,s(e.$t("admin_navbar_links.categories")),1),H]),l(p,{modelValue:i.merchant.main_category_id,"onUpdate:modelValue":[t[8]||(t[8]=a=>i.merchant.main_category_id=a),t[10]||(t[10]=()=>{e.getSubCategoriesAdmin({"filter[parent_id]":i.merchant.main_category_id,listing:1}),this.merchant.category_id=null,this.v$.merchant.category_id.$reset()})],placeholder:e.$t("admin_navbar_links.categories"),items:u.categoryList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",disabled:i.merchant.merchant_id==null,onBlur:t[9]||(t[9]=a=>r.v$.merchant.main_category_id.$touch()),error:r.v$.merchant.main_category_id.$dirty&&r.v$.merchant.main_category_id.required.$invalid,"hide-details":"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","disabled","error","no-data-text"]),r.v$.merchant.main_category_id.$dirty&&r.v$.merchant.main_category_id.required.$invalid?(c(),v("p",J,[K,n("span",null,s(e.$t("errors.required")),1)])):_("",!0)]),_:1}),l(d,{cols:"12",md:"6"},{default:o(()=>[n("p",O,[n("span",null,s(e.$t("admin_categories.sub_categories")),1),Q]),l(p,{modelValue:i.merchant.category_id,"onUpdate:modelValue":t[11]||(t[11]=a=>i.merchant.category_id=a),placeholder:e.$t("admin_categories.sub_categories"),items:u.subCategoryList,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:t[12]||(t[12]=a=>r.v$.merchant.category_id.$touch()),error:r.v$.merchant.category_id.$dirty&&r.v$.merchant.category_id.required.$invalid,"hide-details":"","no-data-text":e.$t("global.actions.no_data"),disabled:i.merchant.main_category_id==null},null,8,["modelValue","placeholder","items","error","no-data-text","disabled"]),r.v$.merchant.category_id.$dirty&&r.v$.merchant.category_id.required.$invalid?(c(),v("p",R,[W,n("span",null,s(e.$t("errors.required")),1)])):_("",!0)]),_:1}),l(d,{md:"6",cols:"12"},{default:o(()=>[l(g,{label:e.$t("admin_services.fields.cost_price"),modelValue:i.merchant.cost_price,"onUpdate:modelValue":t[13]||(t[13]=a=>i.merchant.cost_price=a),value:i.merchant.cost_price,type:"text",error:r.v$.merchant.cost_price.$error,"error-text":r.v$.merchant.cost_price.required.$invalid&&e.$t("errors.required"),onBlur:t[14]||(t[14]=a=>r.v$.merchant.cost_price.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),l(d,{md:"6",cols:"12"},{default:o(()=>[l(g,{label:e.$t("admin_services.fields.sp_price"),modelValue:i.merchant.sp_price,"onUpdate:modelValue":t[15]||(t[15]=a=>i.merchant.sp_price=a),value:i.merchant.sp_price,type:"text",error:r.v$.merchant.sp_price.$error,"error-text":r.v$.merchant.sp_price.required.$invalid&&e.$t("errors.required"),onBlur:t[16]||(t[16]=a=>r.v$.merchant.sp_price.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),l(d,{md:"6",cols:"12"},{default:o(()=>[l(g,{label:e.$t("admin_services.fields.price"),modelValue:i.merchant.price,"onUpdate:modelValue":t[17]||(t[17]=a=>i.merchant.price=a),value:i.merchant.price,type:"text",error:r.v$.merchant.price.$error,"error-text":r.v$.merchant.price.required.$invalid&&e.$t("errors.required"),onBlur:t[18]||(t[18]=a=>r.v$.merchant.price.$touch())},null,8,["label","modelValue","value","error","error-text"])]),_:1}),l(d,{cols:"12",md:"6"},{default:o(()=>[n("p",X,[n("span",null,s(e.$t("admin_merchant.fields.status")),1),Y]),l(p,{modelValue:i.merchant.status,"onUpdate:modelValue":t[19]||(t[19]=a=>i.merchant.status=a),placeholder:e.$t("admin_merchant.fields.status"),items:i.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl",onBlur:t[20]||(t[20]=a=>r.v$.merchant.status.$touch()),error:r.v$.merchant.status.$dirty&&r.v$.merchant.status.required.$invalid,"hide-details":"","no-data-text":e.$t("global.actions.no_data")},null,8,["modelValue","placeholder","items","error","no-data-text"]),r.v$.merchant.status.$dirty&&r.v$.merchant.status.required.$invalid?(c(),v("p",Z,[ee,n("span",null,s(e.$t("errors.required")),1)])):_("",!0)]),_:1}),l(d,{cols:"12"},{default:o(()=>[l(x,{class:"w-100",color:"primary",size:"large",onClick:u.actionBtn,loading:e.uiFlags.isCreating||e.uiFlags.isUpdated,disabled:e.uiFlags.isCreating||e.uiFlags.isUpdated||r.v$.merchant.$error},{default:o(()=>[B(s(u.isEditMerchant?e.$t("global.actions.edit"):e.$t("global.actions.add")),1)]),_:1},8,["onClick","loading","disabled"])]),_:1})]),_:1})],64))])}const ce=k(E,[["render",te]]);export{ce as default};
//# sourceMappingURL=ServiceCreate-DXFoQ27Y.js.map
