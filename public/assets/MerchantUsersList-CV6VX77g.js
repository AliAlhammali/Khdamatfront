import{u as c}from"./merchantUsers.admin.store-DOVxxfjf.js";import{u}from"./merchant.admin.store-CfqCq9f2.js";import{_ as P,m as f,e as g,r as n,o as y,c as w,a as l,w as i,b as m,g as U,t as p,n as A}from"./index-CS9bw-lj.js";import{D as M}from"./DataTable-ClIaddqw.js";import{C as k}from"./ConfirmDialog-CLTOtqR2.js";import{s as $}from"./showAlert.helper-B16U-n7m.js";import"./api.helper-X78EMQNg.js";const C={components:{DataTable:M,ConfirmDialog:k},data(){return{params:{"filter[keyword]":null,perPage:10,page:1},filtersParams:{"filter[merchant_id]":null,"filter[status]":null,"filter[role]":null},listStatus:[{text:this.$t("global.status.active"),value:"active"},{text:this.$t("global.status.inactive"),value:"inactive"}],rolesList:[{text:this.$t("global.role.admin"),value:"admin"},{text:this.$t("global.role.staff"),value:"staff"}]}},async mounted(){await this.getMerchantAdmin({listing:1}),this.$route.query.merchant_id&&(this.params["filter[merchant_id]"]=this.merchants.data.find(e=>e.id==this.$route.query.merchant_id).id),await this.getMerchantUsersAdmin(this.params)},computed:{...f(c,["records","uiFlags"]),...f(u,{merchants:"records",merchantsUiFlags:"uiFlags"}),headers(){return[{title:"#",align:"start",sortable:!0,key:"id"},{title:this.$t("admin_merchant.fields.name"),align:"start",sortable:!0,key:"name"},{title:this.$t("admin_merchant.fields.phone"),align:"start",sortable:!0,key:"phone"},{title:this.$t("admin_merchant.fields.email"),align:"start",sortable:!0,key:"email"},{title:this.$t("admin_merchant.fields.merchant"),align:"start",sortable:!0,key:"merchant.title"},{title:this.$t("admin_merchant.fields.role"),align:"start",sortable:!0,key:"role"},{title:this.$t("admin_merchant.fields.status"),align:"start",sortable:!0,key:"status"}]},items(){return this.records?.data.map(e=>({...e,address:e.address?e.address:"---",phone:e.phone?e.phone:"---",email:e.email?e.email:"---",status:e.status?e.status:"---",role:e.role?e.role:"---"}))}},methods:{...g(c,["getMerchantUsersAdmin","deleteMerchantUsersAdmin"]),...g(u,["getMerchantAdmin"]),async deleteRecord(e){(await $({title:this.$t("global.actions.delete"),text:this.$t("global.actions.delete_confirmation")+e.name,confirmButtonText:this.$t("global.actions.delete"),cancelButtonText:this.$t("global.actions.cancel")})).isConfirmed&&(await this.deleteMerchantUsersAdmin(e.id),await this.getMerchantUsersAdmin(this.params))},async changePage(e){this.params.page=e,await this.getMerchantUsersAdmin(this.params)},async changePerPage(e){this.params.perPage=e,this.params.page=1,await this.getMerchantUsersAdmin(this.params)},async search(e){this.params["filter[keyword]"]=e;const t={"filter[keyword]":e};this.getMerchantUsersAdmin(t)},async filterOrderBy(e,t){this.filtersParams[t]=e,await this.getMerchantUsersAdmin({...this.params,...this.filtersParams})},async clearFilter(){this.filtersParams["filter[status]"]=null,this.filtersParams["filter[merchant_id]"]=null,this.filtersParams["filter[role]"]=null,await this.getMerchantUsersAdmin({...this.params})}},watch:{$route(e,t){e.query.merchant_id?this.params["filter[merchant_id]"]=this.merchants.data.find(h=>h.id==e.query.merchant_id).id:this.params["filter[merchant_id]"]=null,this.getMerchantUsersAdmin(this.params)}}},V={class:""},x=["disabled"],B={class:"badge badge--status"};function S(e,t,h,F,s,r){const d=n("v-select"),o=n("v-col"),_=n("v-icon"),b=n("v-row"),v=n("data-table");return y(),w("div",V,[l(v,{title:e.$t("admin_navbar_links.merchant_users"),placeholder:e.$t("admin_merchant.search_placeholder_users"),headers:r.headers,"slots-items":["","status","role"],isLoading:e.uiFlags?.isLoading,items:r.items,meta:e.records?.meta,"has-filter":!0,onChangePage:r.changePage,onChangePerPage:r.changePerPage,onSearch:r.search},{filter:i(()=>[l(b,null,{default:i(()=>[l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{modelValue:s.filtersParams["filter[merchant_id]"],"onUpdate:modelValue":[t[0]||(t[0]=a=>s.filtersParams["filter[merchant_id]"]=a),t[1]||(t[1]=a=>r.filterOrderBy(a,"filter[merchant_id]"))],placeholder:e.$t("admin_merchant.fields.merchant"),label:e.$t("admin_merchant.fields.merchant"),items:e.merchants.data,"item-title":"title","item-value":"id",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{modelValue:s.filtersParams["filter[role]"],"onUpdate:modelValue":[t[2]||(t[2]=a=>s.filtersParams["filter[role]"]=a),t[3]||(t[3]=a=>r.filterOrderBy(a,"filter[role]"))],placeholder:e.$t("admin_merchant.fields.role"),label:e.$t("admin_merchant.fields.role"),items:s.rolesList,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),l(o,{md:"3",cols:"12"},{default:i(()=>[l(d,{modelValue:s.filtersParams["filter[status]"],"onUpdate:modelValue":[t[4]||(t[4]=a=>s.filtersParams["filter[status]"]=a),t[5]||(t[5]=a=>r.filterOrderBy(a,"filter[status]"))],placeholder:e.$t("admin_merchant.fields.status"),label:e.$t("admin_merchant.fields.status"),items:s.listStatus,"item-title":"text","item-value":"value",outlined:"","menu-icon":"mdi mdi-chevron-down",class:"text-capitalize rounded-xl","no-data-text":e.$t("global.actions.no_data"),"hide-details":""},null,8,["modelValue","placeholder","label","items","no-data-text"])]),_:1}),l(o,{cols:"2"},{default:i(()=>[m("button",{class:"pa-3 rounded border text-error",onClick:t[6]||(t[6]=(...a)=>r.clearFilter&&r.clearFilter(...a)),disabled:!s.filtersParams["filter[merchant_id]"]&&!s.filtersParams["filter[role]"]&&!s.filtersParams["filter[status]"]},[l(_,{size:"24"},{default:i(()=>[U("mdi mdi-filter-variant-remove")]),_:1})],8,x)]),_:1})]),_:1})]),role:i(({item:a})=>[m("span",B,p(e.$t(`global.role.${a.item.role}`)),1)]),status:i(({item:a})=>[m("span",{class:A(["badge badge--status",a.item.status==="active"?"badge--success":"badge--danger"])},p(e.$t(`global.status.${a.item.status}`)),3)]),_:1},8,["title","placeholder","headers","isLoading","items","meta","onChangePage","onChangePerPage","onSearch"])])}const E=P(C,[["render",S]]);export{E as default};
//# sourceMappingURL=MerchantUsersList-CV6VX77g.js.map
