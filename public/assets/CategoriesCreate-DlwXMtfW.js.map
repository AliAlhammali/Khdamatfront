{"version":3,"file":"CategoriesCreate-DlwXMtfW.js","sources":["../../src/views/Admin/Dashboard/categories/CategoriesCreate.vue"],"sourcesContent":["<template>\r\n  <div class=\"content\">\r\n    <template v-if=\"uiFlags.isLoading\">\r\n      <loader />\r\n    </template>\r\n    <template v-else>\r\n      <div class=\"d-flex border-b mb-4 pb-4 justify-space-between\">\r\n        <h2 class=\"\">\r\n          {{\r\n            isEditMerchant\r\n              ? $t(\"admin_categories.edit_title_category\")\r\n              : $t(\"admin_categories.add_title_category\")\r\n          }}\r\n        </h2>\r\n        <button class=\"d-flex ga-2 align-center\" @click=\"$router.go(-1)\">\r\n          <span>\r\n            {{ $t(\"global.actions.back\") }}\r\n          </span>\r\n          <span class=\"fa fa-arrow-left\"></span>\r\n        </button>\r\n      </div>\r\n      <v-row>\r\n        <v-col md=\"6\" cols=\"12\">\r\n          <filed-input\r\n            :label=\"$t('admin_categories.fields.title_ar')\"\r\n            v-model=\"merchant.title.ar\"\r\n            :value=\"merchant.title.ar\"\r\n            type=\"text\"\r\n            :error=\"v$.merchant.title.ar.$error\"\r\n            :error-text=\"\r\n              v$.merchant.title.ar.required.$invalid && $t('errors.required')\r\n            \"\r\n            @blur=\"v$.merchant.title.ar.$touch()\"\r\n          />\r\n        </v-col>\r\n\r\n        <v-col md=\"6\" cols=\"12\">\r\n          <filed-input\r\n            :label=\"$t('admin_categories.fields.title_en')\"\r\n            v-model=\"merchant.title.en\"\r\n            :value=\"merchant.title.en\"\r\n            type=\"text\"\r\n            :error=\"v$.merchant.title.en.$error\"\r\n            :error-text=\"\r\n              v$.merchant.title.en.required.$invalid && $t('errors.required')\r\n            \"\r\n            @blur=\"v$.merchant.title.en.$touch()\"\r\n          />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"6\" v-if=\"!isEditMerchant\">\r\n          <p class=\"d-flex align-center ga-2 mb-3 filed__label\">\r\n            <span> {{ $t(\"admin_categories.fields.merchant_id\") }}</span>\r\n            <span class=\"text-red\">*</span>\r\n          </p>\r\n          <v-select\r\n            v-model=\"merchant.merchant_id\"\r\n            :placeholder=\"$t('admin_categories.fields.merchant_id')\"\r\n            :items=\"merchants?.data\"\r\n            :item-title=\"'title'\"\r\n            item-value=\"id\"\r\n            menu-icon=\"mdi mdi-chevron-down\"\r\n            class=\"w-100\"\r\n            outlined\r\n            :error=\"\r\n              v$.merchant.merchant_id.$dirty &&\r\n              v$.merchant.merchant_id.required.$invalid\r\n            \"\r\n            :no-data-text=\"$t('global.actions.no_data')\"\r\n            @blur=\"v$.merchant.merchant_id.$touch()\"\r\n          />\r\n\r\n          <p\r\n            class=\"text-error mt-2 d-flex ga-2 align-center\"\r\n            v-if=\"\r\n              v$.merchant.merchant_id.$dirty &&\r\n              v$.merchant.merchant_id.required.$invalid\r\n            \"\r\n          >\r\n            <span class=\"mdi mdi-24px mdi-alert-circle-outline\"></span>\r\n            <span>{{ $t(\"errors.required\") }}</span>\r\n          </p>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"6\">\r\n          <p class=\"d-flex align-center ga-2 mb-3 filed__label\">\r\n            <span> {{ $t(\"admin_merchant.fields.status\") }}</span>\r\n            <span class=\"text-red\">*</span>\r\n          </p>\r\n\r\n          <v-select\r\n            v-model=\"merchant.status\"\r\n            :placeholder=\"$t('admin_merchant.fields.status')\"\r\n            :items=\"listStatus\"\r\n            :item-title=\"'text'\"\r\n            :item-value=\"'value'\"\r\n            outlined\r\n            menu-icon=\"mdi mdi-chevron-down\"\r\n            class=\"text-capitalize rounded-xl\"\r\n            @blur=\"v$.merchant.status.$touch()\"\r\n            :error=\"\r\n              v$.merchant.status.$dirty && v$.merchant.status.required.$invalid\r\n            \"\r\n            hide-details\r\n            :no-data-text=\"$t('global.actions.no_data')\"\r\n          />\r\n          <p\r\n            class=\"text-error mt-2 d-flex ga-2 align-center\"\r\n            v-if=\"\r\n              v$.merchant.status.$dirty && v$.merchant.status.required.$invalid\r\n            \"\r\n          >\r\n            <span class=\"mdi mdi-24px mdi-alert-circle-outline\"></span>\r\n            <span>{{ $t(\"errors.required\") }}</span>\r\n          </p>\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\" md=\"6\" v-if=\"!isEditMerchant && merchant.merchant_id\">\r\n          <p class=\"d-flex align-center ga-2 mb-3 filed__label\">\r\n            <span> {{ $t(\"admin_navbar_links.categories\") }}</span>\r\n          </p>\r\n          <v-select\r\n            v-model=\"merchant.parent_id\"\r\n            :placeholder=\"$t('admin_navbar_links.categories')\"\r\n            :items=\"categoryList\"\r\n            :item-title=\"'title'\"\r\n            :item-value=\"'id'\"\r\n            outlined\r\n            menu-icon=\"mdi mdi-chevron-down\"\r\n            class=\"text-capitalize rounded-xl\"\r\n            hide-details\r\n            :no-data-text=\"$t('global.actions.no_data')\"\r\n          />\r\n        </v-col>\r\n\r\n        <v-col cols=\"12\">\r\n          <v-btn\r\n            class=\"w-100\"\r\n            color=\"primary\"\r\n            size=\"large\"\r\n            @click=\"actionBtn\"\r\n            :loading=\"uiFlags.isCreating || uiFlags.isUpdated\"\r\n            :disabled=\"\r\n              uiFlags.isCreating || uiFlags.isUpdated || v$.merchant.$error\r\n            \"\r\n          >\r\n            {{\r\n              isEditMerchant\r\n                ? $t(\"global.actions.edit\")\r\n                : $t(\"global.actions.add\")\r\n            }}\r\n          </v-btn>\r\n        </v-col>\r\n      </v-row>\r\n    </template>\r\n  </div>\r\n</template>\r\n<script>\r\nimport FiledInput from \"@/components/common/FiledInput.vue\";\r\nimport { mapActions, mapState } from \"pinia\";\r\nimport { useVuelidate } from \"@vuelidate/core\";\r\nimport { required } from \"@vuelidate/validators\";\r\nimport { useMerchantAdminStore } from \"@/stores/admin/merchant/merchant.admin.store\";\r\nimport { useCategoriesAdminStore } from \"@/stores/admin/categories/categories.admin.store\";\r\nimport Loader from \"@/components/common/Loader.vue\";\r\nimport { updateToPatchData } from \"@/helper/update.inputs.helper\";\r\n\r\nexport default {\r\n  components: { FiledInput, Loader },\r\n  setup() {\r\n    return { v$: useVuelidate() };\r\n  },\r\n  validations() {\r\n    return {\r\n      merchant: {\r\n        title: {\r\n          ar: { required },\r\n          en: { required },\r\n        },\r\n        merchant_id: { required },\r\n        status: { required },\r\n      },\r\n    };\r\n  },\r\n  data() {\r\n    return {\r\n      merchant: {\r\n        title: {\r\n          ar: \"\",\r\n          en: \"\",\r\n        },\r\n        status: null,\r\n        merchant_id: null,\r\n        parent_id: null,\r\n      },\r\n      listStatus: [\r\n        {\r\n          text: this.$t(\"global.status.active\"),\r\n          value: \"active\",\r\n        },\r\n        {\r\n          text: this.$t(\"global.status.inactive\"),\r\n          value: \"inactive\",\r\n        },\r\n      ],\r\n    };\r\n  },\r\n  async mounted() {\r\n    if (this.isEditMerchant) {\r\n      const id = this.$route.params.id;\r\n      await this.showCategoriesAdmin(id);\r\n      this.merchant = { ...this.record };\r\n      this.merchant.title = {\r\n        ar: this.record.title.ar,\r\n        en: this.record.title.en,\r\n      };\r\n      this.merchant.parent_id = this.record?.parent?.id;\r\n    }\r\n\r\n    if (this.$route.query?.merchant_id) {\r\n      this.merchant.merchant_id = +this.$route.query.merchant_id;\r\n    }\r\n\r\n    await this.getCategoriesAdmin({ \"filter[isParent]\": 1, listing: 1 });\r\n    await this.getMerchantAdmin({\r\n      listing: 1,\r\n    });\r\n  },\r\n  computed: {\r\n    ...mapState(useMerchantAdminStore, {\r\n      merchants: \"records\",\r\n      merchantsUiFlags: \"uiFlags\",\r\n    }),\r\n    ...mapState(useCategoriesAdminStore, [\"uiFlags\", \"record\", \"records\"]),\r\n    isEditMerchant() {\r\n      return this.$route.name === \"admin-categories-edit\";\r\n    },\r\n    categoryList() {\r\n      const isEditList = this.isEditMerchant\r\n        ? this.records?.data?.filter((item) => item.id !== this.record.id)\r\n        : this.records?.data;\r\n      return isEditList?.map((item) => {\r\n        return {\r\n          ...item,\r\n          title: item.title[this.$i18n.locale],\r\n        };\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    ...mapActions(useCategoriesAdminStore, [\r\n      \"createCategoriesAdmin\",\r\n      \"showCategoriesAdmin\",\r\n      \"updateCategoriesAdmin\",\r\n      \"getCategoriesAdmin\",\r\n    ]),\r\n    ...mapActions(useMerchantAdminStore, [\"getMerchantAdmin\"]),\r\n\r\n    actionBtn() {\r\n      this.v$.$touch();\r\n      if (this.v$.$error) return;\r\n      if (this.isEditMerchant) {\r\n        const data = updateToPatchData(this.merchant, this.record);\r\n        this.updateCategoriesAdmin(this.record.id, data);\r\n        return;\r\n      } else {\r\n        this.createCategoriesAdmin({ ...this.merchant });\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n"],"names":["_sfc_main","FiledInput","Loader","useVuelidate","required","id","mapState","useMerchantAdminStore","useCategoriesAdminStore","item","mapActions","data","updateToPatchData","_hoisted_1","_hoisted_2","_hoisted_3","_createElementVNode","_hoisted_5","_hoisted_6","_hoisted_9","_hoisted_10","_hoisted_13","_openBlock","_createElementBlock","_ctx","_createBlock","_component_loader","_Fragment","_toDisplayString","$options","_cache","$event","_hoisted_4","_createVNode","_component_v_row","_withCtx","_component_v_col","_component_filed_input","$data","$setup","_createCommentVNode","_component_v_select","_hoisted_7","_hoisted_8","_hoisted_11","_hoisted_12","_component_v_btn","_createTextVNode"],"mappings":"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"}